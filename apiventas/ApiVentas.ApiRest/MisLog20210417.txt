2021-04-17 09:44:08.965 -05:00 [INF] User profile is available. Using 'C:\Users\Miguelon\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-04-17 09:44:09.515 -05:00 [INF] Now listening on: http://localhost:5000
2021-04-17 09:44:09.518 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-04-17 09:44:09.519 -05:00 [INF] Hosting environment: Development
2021-04-17 09:44:09.521 -05:00 [INF] Content root path: D:\Cursos\Galaxy\Net5-Grupo01\Sesion07\Ejercicios\ApiVentas\ApiVentas.ApiRest
2021-04-17 09:44:10.534 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger - -
2021-04-17 09:44:10.626 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger - - - 301 0 - 93.7184ms
2021-04-17 09:44:10.643 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.html - -
2021-04-17 09:44:10.766 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.html - - - 200 - text/html;charset=utf-8 122.8515ms
2021-04-17 09:44:10.803 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/swagger-ui.css - -
2021-04-17 09:44:10.817 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/swagger-ui-bundle.js - -
2021-04-17 09:44:10.817 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/swagger-ui-standalone-preset.js - -
2021-04-17 09:44:10.896 -05:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2021-04-17 09:44:10.896 -05:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2021-04-17 09:44:10.904 -05:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2021-04-17 09:44:10.910 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/swagger-ui.css - - - 200 142933 text/css 106.5988ms
2021-04-17 09:44:10.911 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/swagger-ui-standalone-preset.js - - - 200 311804 application/javascript 94.6286ms
2021-04-17 09:44:10.913 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/swagger-ui-bundle.js - - - 200 986342 application/javascript 96.4197ms
2021-04-17 09:44:11.147 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - -
2021-04-17 09:44:11.295 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 147.7593ms
2021-04-17 09:47:30.675 -05:00 [INF] User profile is available. Using 'C:\Users\Miguelon\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-04-17 09:47:31.082 -05:00 [INF] Now listening on: http://localhost:5000
2021-04-17 09:47:31.085 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-04-17 09:47:31.086 -05:00 [INF] Hosting environment: Development
2021-04-17 09:47:31.087 -05:00 [INF] Content root path: D:\Cursos\Galaxy\Net5-Grupo01\Sesion07\Ejercicios\ApiVentas\ApiVentas.ApiRest
2021-04-17 09:47:32.489 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.html - -
2021-04-17 09:47:32.639 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.html - - - 200 - text/html;charset=utf-8 153.9282ms
2021-04-17 09:47:32.996 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - -
2021-04-17 09:47:33.151 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 154.7883ms
2021-04-17 09:58:27.482 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 09:58:27.541 -05:00 [INF] CORS policy execution successful.
2021-04-17 09:58:28.029 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 09:58:28.039 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 09:58:28.043 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 560.4253ms
2021-04-17 10:00:53.625 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 10:00:53.635 -05:00 [INF] CORS policy execution successful.
2021-04-17 10:00:53.638 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 10:00:53.639 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 10:00:53.641 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 19.6028ms
2021-04-17 10:01:11.639 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 10:01:11.642 -05:00 [INF] CORS policy execution successful.
2021-04-17 10:01:11.645 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 10:01:11.647 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 10:01:11.650 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 11.0596ms
2021-04-17 10:06:17.528 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 10:06:17.531 -05:00 [INF] CORS policy execution successful.
2021-04-17 10:06:17.532 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 10:06:17.534 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 10:06:17.536 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 8.5354ms
2021-04-17 10:06:36.581 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 10:06:36.584 -05:00 [INF] CORS policy execution successful.
2021-04-17 10:06:36.586 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 10:06:36.590 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 10:06:36.592 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 10.8918ms
2021-04-17 10:07:29.694 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 10:07:29.703 -05:00 [INF] CORS policy execution successful.
2021-04-17 10:07:29.706 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 10:07:29.708 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 10:07:29.710 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 16.3625ms
2021-04-17 10:07:48.746 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 10:07:48.751 -05:00 [INF] CORS policy execution successful.
2021-04-17 10:07:48.754 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 10:07:48.756 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 10:07:48.758 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 11.9615ms
2021-04-17 10:10:41.135 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 10:10:41.137 -05:00 [INF] CORS policy execution successful.
2021-04-17 10:10:41.138 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 10:10:41.140 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 10:10:41.142 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 7.5697ms
2021-04-17 10:11:46.085 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 10:11:46.133 -05:00 [INF] CORS policy execution successful.
2021-04-17 10:11:46.137 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 10:11:46.142 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 10:11:46.148 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 62.3222ms
2021-04-17 10:12:18.274 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 10:12:18.276 -05:00 [INF] CORS policy execution successful.
2021-04-17 10:12:18.278 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 10:12:18.280 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 10:12:18.284 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 9.4095ms
2021-04-17 10:14:55.129 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 10:14:55.159 -05:00 [INF] CORS policy execution successful.
2021-04-17 10:14:55.161 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 10:14:55.165 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 10:14:55.175 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 46.0643ms
2021-04-17 10:15:19.329 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 10:15:19.331 -05:00 [INF] CORS policy execution successful.
2021-04-17 10:15:19.333 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 10:15:19.335 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 10:15:19.336 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 6.9270ms
2021-04-17 10:19:03.979 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 10:19:03.996 -05:00 [INF] CORS policy execution successful.
2021-04-17 10:19:03.999 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 10:19:04.003 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 10:19:04.005 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 26.5464ms
2021-04-17 10:19:16.849 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 10:19:16.852 -05:00 [INF] CORS policy execution successful.
2021-04-17 10:19:16.854 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 10:19:16.856 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 10:19:16.858 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 8.8705ms
2021-04-17 10:23:22.887 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/auth - -
2021-04-17 10:23:22.889 -05:00 [INF] CORS policy execution successful.
2021-04-17 10:23:22.893 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/auth - - - 204 - - 6.0251ms
2021-04-17 10:23:22.898 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/auth application/json 40
2021-04-17 10:23:22.899 -05:00 [INF] CORS policy execution successful.
2021-04-17 10:23:22.902 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 10:23:22.970 -05:00 [INF] Route matched with {action = "Valida", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Valida(ApiVentas.ApiRest.Managers.DTO.LoginRequestDTO) on controller ApiVentas.ApiRest.Controllers.AuthController (ApiVentas.ApiRest).
2021-04-17 10:23:54.777 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 10:23:55.281 -05:00 [INF] Executed DbCommand (86ms) [Parameters=[@__ToUpper_0='?' (Size = 4000), @__clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[IdUsuario], [u].[Clave], [u].[Credencial], [u].[Rol]
FROM [Usuario] AS [u]
WHERE (UPPER([u].[Credencial]) = @__ToUpper_0) AND ([u].[Clave] = @__clave_1)
2021-04-17 10:24:53.713 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.LoginResponseDTO'.
2021-04-17 10:24:53.733 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest) in 90747.1472ms
2021-04-17 10:24:53.738 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 10:24:53.749 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/auth application/json 40 - 200 - application/json;+charset=utf-8 90851.7055ms
2021-04-17 10:28:55.688 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/auth - -
2021-04-17 10:28:55.697 -05:00 [INF] CORS policy execution successful.
2021-04-17 10:28:55.700 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/auth - - - 204 - - 13.3693ms
2021-04-17 10:28:55.703 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/auth application/json 40
2021-04-17 10:28:55.716 -05:00 [INF] CORS policy execution successful.
2021-04-17 10:28:55.719 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 10:28:55.723 -05:00 [INF] Route matched with {action = "Valida", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Valida(ApiVentas.ApiRest.Managers.DTO.LoginRequestDTO) on controller ApiVentas.ApiRest.Controllers.AuthController (ApiVentas.ApiRest).
2021-04-17 10:28:58.523 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 10:28:58.539 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__ToUpper_0='?' (Size = 4000), @__clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[IdUsuario], [u].[Clave], [u].[Credencial], [u].[Rol]
FROM [Usuario] AS [u]
WHERE (UPPER([u].[Credencial]) = @__ToUpper_0) AND ([u].[Clave] = @__clave_1)
2021-04-17 10:28:58.558 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.LoginResponseDTO'.
2021-04-17 10:28:58.563 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest) in 2833.5661ms
2021-04-17 10:28:58.566 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 10:28:58.571 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/auth application/json 40 - 200 - application/json;+charset=utf-8 2867.8604ms
2021-04-17 10:50:40.249 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 10:50:40.254 -05:00 [INF] CORS policy execution successful.
2021-04-17 10:50:40.256 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 10:50:40.259 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 10:50:40.263 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 13.9385ms
2021-04-17 10:51:26.266 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 10:51:26.279 -05:00 [INF] CORS policy execution successful.
2021-04-17 10:51:26.283 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 10:51:26.289 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 10:51:26.293 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 27.1449ms
2021-04-17 11:00:00.932 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/auth - -
2021-04-17 11:00:00.937 -05:00 [INF] CORS policy execution successful.
2021-04-17 11:00:00.940 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/auth - - - 204 - - 9.0778ms
2021-04-17 11:00:00.953 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/auth application/json 40
2021-04-17 11:00:00.955 -05:00 [INF] CORS policy execution successful.
2021-04-17 11:00:00.958 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 11:00:00.961 -05:00 [INF] Route matched with {action = "Valida", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Valida(ApiVentas.ApiRest.Managers.DTO.LoginRequestDTO) on controller ApiVentas.ApiRest.Controllers.AuthController (ApiVentas.ApiRest).
2021-04-17 11:00:00.984 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 11:00:01.018 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__ToUpper_0='?' (Size = 4000), @__clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[IdUsuario], [u].[Clave], [u].[Credencial], [u].[Rol]
FROM [Usuario] AS [u]
WHERE (UPPER([u].[Credencial]) = @__ToUpper_0) AND ([u].[Clave] = @__clave_1)
2021-04-17 11:00:01.032 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.LoginResponseDTO'.
2021-04-17 11:00:01.034 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest) in 63.605ms
2021-04-17 11:00:01.036 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 11:00:01.038 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/auth application/json 40 - 200 - application/json;+charset=utf-8 84.8349ms
2021-04-17 11:04:23.416 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/auth - -
2021-04-17 11:04:23.419 -05:00 [INF] CORS policy execution successful.
2021-04-17 11:04:23.422 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/auth - - - 204 - - 5.8884ms
2021-04-17 11:04:23.434 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/auth application/json 40
2021-04-17 11:04:23.436 -05:00 [INF] CORS policy execution successful.
2021-04-17 11:04:23.439 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 11:04:23.441 -05:00 [INF] Route matched with {action = "Valida", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Valida(ApiVentas.ApiRest.Managers.DTO.LoginRequestDTO) on controller ApiVentas.ApiRest.Controllers.AuthController (ApiVentas.ApiRest).
2021-04-17 11:04:23.451 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 11:04:23.486 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__ToUpper_0='?' (Size = 4000), @__clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[IdUsuario], [u].[Clave], [u].[Credencial], [u].[Rol]
FROM [Usuario] AS [u]
WHERE (UPPER([u].[Credencial]) = @__ToUpper_0) AND ([u].[Clave] = @__clave_1)
2021-04-17 11:04:23.497 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.LoginResponseDTO'.
2021-04-17 11:04:23.500 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest) in 50.7049ms
2021-04-17 11:04:23.509 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 11:04:23.515 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/auth application/json 40 - 200 - application/json;+charset=utf-8 80.0357ms
2021-04-17 11:07:21.040 -05:00 [INF] User profile is available. Using 'C:\Users\Miguelon\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-04-17 11:07:21.442 -05:00 [INF] Now listening on: http://localhost:5000
2021-04-17 11:07:21.444 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-04-17 11:07:21.446 -05:00 [INF] Hosting environment: Development
2021-04-17 11:07:21.448 -05:00 [INF] Content root path: D:\Cursos\Galaxy\Net5-Grupo01\Sesion07\Ejercicios\ApiVentas\ApiVentas.ApiRest
2021-04-17 11:07:22.581 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.html - -
2021-04-17 11:07:22.764 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.html - - - 200 - text/html;charset=utf-8 190.6314ms
2021-04-17 11:07:23.041 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - -
2021-04-17 11:07:23.113 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/favicon-32x32.png - -
2021-04-17 11:07:23.350 -05:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2021-04-17 11:07:23.365 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/favicon-32x32.png - - - 200 628 image/png 252.0513ms
2021-04-17 11:07:23.405 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 364.0995ms
2021-04-17 11:07:30.499 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/auth - -
2021-04-17 11:07:30.545 -05:00 [INF] CORS policy execution successful.
2021-04-17 11:07:30.550 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/auth - - - 204 - - 51.0222ms
2021-04-17 11:07:30.557 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/auth application/json 40
2021-04-17 11:07:30.559 -05:00 [INF] CORS policy execution successful.
2021-04-17 11:07:30.639 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 11:07:30.684 -05:00 [INF] Route matched with {action = "Valida", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Valida(ApiVentas.ApiRest.Managers.DTO.LoginRequestDTO) on controller ApiVentas.ApiRest.Controllers.AuthController (ApiVentas.ApiRest).
2021-04-17 11:07:32.129 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 11:07:32.623 -05:00 [INF] Executed DbCommand (59ms) [Parameters=[@__ToUpper_0='?' (Size = 4000), @__clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[IdUsuario], [u].[Clave], [u].[Credencial], [u].[Rol]
FROM [Usuario] AS [u]
WHERE (UPPER([u].[Credencial]) = @__ToUpper_0) AND ([u].[Clave] = @__clave_1)
2021-04-17 11:07:32.873 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/auth application/json 40
2021-04-17 11:07:32.877 -05:00 [INF] CORS policy execution successful.
2021-04-17 11:07:32.879 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 11:07:32.881 -05:00 [INF] Route matched with {action = "Valida", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Valida(ApiVentas.ApiRest.Managers.DTO.LoginRequestDTO) on controller ApiVentas.ApiRest.Controllers.AuthController (ApiVentas.ApiRest).
2021-04-17 11:07:32.906 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.LoginResponseDTO'.
2021-04-17 11:07:32.925 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest) in 2232.8984ms
2021-04-17 11:07:32.925 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 11:07:32.927 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 11:07:32.941 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__ToUpper_0='?' (Size = 4000), @__clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[IdUsuario], [u].[Clave], [u].[Credencial], [u].[Rol]
FROM [Usuario] AS [u]
WHERE (UPPER([u].[Credencial]) = @__ToUpper_0) AND ([u].[Clave] = @__clave_1)
2021-04-17 11:07:32.953 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/auth application/json 40 - 200 - application/json;+charset=utf-8 2394.9727ms
2021-04-17 11:07:32.954 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.LoginResponseDTO'.
2021-04-17 11:07:32.961 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest) in 72.7205ms
2021-04-17 11:07:32.973 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 11:07:32.976 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/auth application/json 40 - 200 - application/json;+charset=utf-8 103.3530ms
2021-04-17 11:38:06.424 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 11:38:06.443 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 11:38:06.457 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 11:38:06.459 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 37.2675ms
2021-04-17 11:45:15.035 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/auth - -
2021-04-17 11:45:15.041 -05:00 [INF] CORS policy execution successful.
2021-04-17 11:45:15.045 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/auth - - - 204 - - 9.4218ms
2021-04-17 11:45:15.055 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/auth application/json 40
2021-04-17 11:45:15.068 -05:00 [INF] CORS policy execution successful.
2021-04-17 11:45:15.070 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 11:45:15.077 -05:00 [INF] Route matched with {action = "Valida", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Valida(ApiVentas.ApiRest.Managers.DTO.LoginRequestDTO) on controller ApiVentas.ApiRest.Controllers.AuthController (ApiVentas.ApiRest).
2021-04-17 11:45:15.101 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 11:45:15.115 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__ToUpper_0='?' (Size = 4000), @__clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[IdUsuario], [u].[Clave], [u].[Credencial], [u].[Rol]
FROM [Usuario] AS [u]
WHERE (UPPER([u].[Credencial]) = @__ToUpper_0) AND ([u].[Clave] = @__clave_1)
2021-04-17 11:45:15.123 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.LoginResponseDTO'.
2021-04-17 11:45:15.130 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest) in 44.9146ms
2021-04-17 11:45:15.133 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 11:45:15.135 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/auth application/json 40 - 200 - application/json;+charset=utf-8 79.6363ms
2021-04-17 11:54:38.771 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 11:54:38.778 -05:00 [INF] CORS policy execution successful.
2021-04-17 11:54:38.780 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 11:54:38.782 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 11:54:38.784 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 13.4376ms
2021-04-17 11:54:44.636 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 11:54:44.646 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 11:54:44.651 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 11:54:44.657 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 20.9365ms
2021-04-17 11:54:57.923 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/Listar - -
2021-04-17 11:54:57.926 -05:00 [INF] CORS policy execution successful.
2021-04-17 11:54:57.928 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 11:54:57.932 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 11:54:57.941 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/Listar - - - 401 0 - 18.1227ms
2021-04-17 11:55:10.968 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 11:55:10.970 -05:00 [INF] CORS policy execution successful.
2021-04-17 11:55:10.972 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 11:55:10.975 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 11:55:10.977 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 8.2475ms
2021-04-17 11:58:45.038 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 11:58:45.055 -05:00 [INF] CORS policy execution successful.
2021-04-17 11:58:45.057 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 18.7160ms
2021-04-17 11:58:45.059 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= application/json -
2021-04-17 11:58:45.062 -05:00 [INF] CORS policy execution successful.
2021-04-17 11:58:45.251 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-04-17 11:58:45.365 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2021-04-17 11:58:45.369 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 11:58:45.379 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 11:58:45.388 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= application/json - - 401 0 - 324.5206ms
2021-04-17 11:58:59.525 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 11:58:59.529 -05:00 [INF] CORS policy execution successful.
2021-04-17 11:58:59.530 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 5.0124ms
2021-04-17 11:58:59.536 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= application/json -
2021-04-17 11:58:59.538 -05:00 [INF] CORS policy execution successful.
2021-04-17 11:58:59.542 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-04-17 11:58:59.553 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2021-04-17 11:58:59.556 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 11:58:59.566 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 11:58:59.569 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= application/json - - 401 0 - 32.5653ms
2021-04-17 11:59:10.971 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/auth - -
2021-04-17 11:59:10.975 -05:00 [INF] CORS policy execution successful.
2021-04-17 11:59:10.977 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/auth - - - 204 - - 6.2382ms
2021-04-17 11:59:10.980 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/auth application/json 40
2021-04-17 11:59:10.982 -05:00 [INF] CORS policy execution successful.
2021-04-17 11:59:10.985 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 11:59:10.990 -05:00 [INF] Route matched with {action = "Valida", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Valida(ApiVentas.ApiRest.Managers.DTO.LoginRequestDTO) on controller ApiVentas.ApiRest.Controllers.AuthController (ApiVentas.ApiRest).
2021-04-17 11:59:10.998 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 11:59:11.014 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__ToUpper_0='?' (Size = 4000), @__clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[IdUsuario], [u].[Clave], [u].[Credencial], [u].[Rol]
FROM [Usuario] AS [u]
WHERE (UPPER([u].[Credencial]) = @__ToUpper_0) AND ([u].[Clave] = @__clave_1)
2021-04-17 11:59:11.027 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.LoginResponseDTO'.
2021-04-17 11:59:11.031 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest) in 35.0658ms
2021-04-17 11:59:11.036 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 11:59:11.040 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/auth application/json 40 - 200 - application/json;+charset=utf-8 60.6078ms
2021-04-17 11:59:18.868 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 11:59:18.871 -05:00 [INF] CORS policy execution successful.
2021-04-17 11:59:18.873 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 4.9957ms
2021-04-17 11:59:18.875 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= application/json -
2021-04-17 11:59:18.877 -05:00 [INF] CORS policy execution successful.
2021-04-17 11:59:18.898 -05:00 [INF] Successfully validated the token.
2021-04-17 11:59:18.901 -05:00 [INF] Authorization was successful.
2021-04-17 11:59:18.902 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 11:59:18.922 -05:00 [INF] Route matched with {action = "ListarPag", controller = "Articulo"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ListarPag(ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaParamDTO) on controller ApiVentas.ApiRest.Controllers.ArticuloController (ApiVentas.ApiRest).
2021-04-17 11:59:18.945 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 11:59:19.009 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DBO].[Product] AS [p]
2021-04-17 11:59:19.032 -05:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results.
2021-04-17 11:59:19.034 -05:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results.
2021-04-17 11:59:19.138 -05:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ProductId], [t].[Nombre], [t].[Precio], [p0].[IdArticuloImagen], [p0].[IdArticulo], [p0].[NombreArchivo], [p0].[NombreGenerado]
FROM (
    SELECT [p].[ProductId], [p].[Nombre], [p].[Precio]
    FROM [DBO].[Product] AS [p]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [DBO].[ProductImage] AS [p0] ON [t].[ProductId] = [p0].[IdArticulo]
ORDER BY [t].[ProductId], [p0].[IdArticuloImagen]
2021-04-17 11:59:19.174 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaDTO'.
2021-04-17 11:59:19.185 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest) in 258.3562ms
2021-04-17 11:59:19.193 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 11:59:19.196 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= application/json - - 200 - application/json;+charset=utf-8 320.8475ms
2021-04-17 11:59:38.197 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 11:59:38.200 -05:00 [INF] CORS policy execution successful.
2021-04-17 11:59:38.202 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 5.1366ms
2021-04-17 11:59:38.210 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= application/json -
2021-04-17 11:59:38.212 -05:00 [INF] CORS policy execution successful.
2021-04-17 11:59:38.214 -05:00 [INF] Successfully validated the token.
2021-04-17 11:59:38.216 -05:00 [INF] Authorization was successful.
2021-04-17 11:59:38.217 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 11:59:38.221 -05:00 [INF] Route matched with {action = "ListarPag", controller = "Articulo"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ListarPag(ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaParamDTO) on controller ApiVentas.ApiRest.Controllers.ArticuloController (ApiVentas.ApiRest).
2021-04-17 11:59:43.516 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 11:59:43.541 -05:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DBO].[Product] AS [p]
2021-04-17 11:59:43.558 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ProductId], [t].[Nombre], [t].[Precio], [p0].[IdArticuloImagen], [p0].[IdArticulo], [p0].[NombreArchivo], [p0].[NombreGenerado]
FROM (
    SELECT [p].[ProductId], [p].[Nombre], [p].[Precio]
    FROM [DBO].[Product] AS [p]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [DBO].[ProductImage] AS [p0] ON [t].[ProductId] = [p0].[IdArticulo]
ORDER BY [t].[ProductId], [p0].[IdArticuloImagen]
2021-04-17 11:59:43.575 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaDTO'.
2021-04-17 11:59:43.583 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest) in 5355.4966ms
2021-04-17 11:59:43.590 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 11:59:43.594 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= application/json - - 200 - application/json;+charset=utf-8 5384.2094ms
2021-04-17 11:59:46.913 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=1&regPagina=5&filtro= - -
2021-04-17 11:59:46.916 -05:00 [INF] CORS policy execution successful.
2021-04-17 11:59:46.919 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=1&regPagina=5&filtro= - - - 204 - - 5.8903ms
2021-04-17 11:59:46.928 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=1&regPagina=5&filtro= application/json -
2021-04-17 11:59:46.931 -05:00 [INF] CORS policy execution successful.
2021-04-17 11:59:46.933 -05:00 [INF] Successfully validated the token.
2021-04-17 11:59:46.935 -05:00 [INF] Authorization was successful.
2021-04-17 11:59:46.939 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 11:59:46.943 -05:00 [INF] Route matched with {action = "ListarPag", controller = "Articulo"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ListarPag(ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaParamDTO) on controller ApiVentas.ApiRest.Controllers.ArticuloController (ApiVentas.ApiRest).
2021-04-17 11:59:48.454 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 11:59:48.464 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DBO].[Product] AS [p]
2021-04-17 11:59:48.474 -05:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results.
2021-04-17 11:59:48.478 -05:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results.
2021-04-17 11:59:48.496 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ProductId], [t].[Nombre], [t].[Precio], [p0].[IdArticuloImagen], [p0].[IdArticulo], [p0].[NombreArchivo], [p0].[NombreGenerado]
FROM (
    SELECT [p].[ProductId], [p].[Nombre], [p].[Precio]
    FROM [DBO].[Product] AS [p]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
) AS [t]
LEFT JOIN [DBO].[ProductImage] AS [p0] ON [t].[ProductId] = [p0].[IdArticulo]
ORDER BY [t].[ProductId], [p0].[IdArticuloImagen]
2021-04-17 11:59:48.524 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaDTO'.
2021-04-17 11:59:48.530 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest) in 1580.5296ms
2021-04-17 11:59:48.539 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 11:59:48.544 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=1&regPagina=5&filtro= application/json - - 200 - application/json;+charset=utf-8 1616.7126ms
2021-04-17 12:08:05.783 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:08:05.791 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:08:05.794 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 10.7485ms
2021-04-17 12:08:05.807 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= application/json -
2021-04-17 12:08:05.814 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:08:05.816 -05:00 [INF] Successfully validated the token.
2021-04-17 12:08:05.825 -05:00 [INF] Authorization was successful.
2021-04-17 12:08:05.827 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 12:08:05.831 -05:00 [INF] Route matched with {action = "ListarPag", controller = "Articulo"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ListarPag(ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaParamDTO) on controller ApiVentas.ApiRest.Controllers.ArticuloController (ApiVentas.ApiRest).
2021-04-17 12:08:22.533 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 12:08:22.547 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DBO].[Product] AS [p]
2021-04-17 12:08:22.568 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ProductId], [t].[Nombre], [t].[Precio], [p0].[IdArticuloImagen], [p0].[IdArticulo], [p0].[NombreArchivo], [p0].[NombreGenerado]
FROM (
    SELECT [p].[ProductId], [p].[Nombre], [p].[Precio]
    FROM [DBO].[Product] AS [p]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [DBO].[ProductImage] AS [p0] ON [t].[ProductId] = [p0].[IdArticulo]
ORDER BY [t].[ProductId], [p0].[IdArticuloImagen]
2021-04-17 12:08:22.582 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaDTO'.
2021-04-17 12:08:22.587 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest) in 16747.4507ms
2021-04-17 12:08:22.602 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 12:08:22.606 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= application/json - - 200 - application/json;+charset=utf-8 16798.4551ms
2021-04-17 12:19:04.547 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:19:04.555 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:19:04.558 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 11.6878ms
2021-04-17 12:19:04.566 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= application/json -
2021-04-17 12:19:04.572 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:19:04.579 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-04-17 12:19:04.593 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2021-04-17 12:19:04.595 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 12:19:04.597 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 12:19:04.602 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= application/json - - 401 0 - 35.4650ms
2021-04-17 12:20:44.097 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:20:44.100 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:20:44.101 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 6.4322ms
2021-04-17 12:20:44.156 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:20:44.159 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:20:44.162 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-04-17 12:20:44.175 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2021-04-17 12:20:44.179 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 12:20:44.183 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 12:20:44.185 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 28.2573ms
2021-04-17 12:20:58.857 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/auth - -
2021-04-17 12:20:58.860 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:20:58.863 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/auth - - - 204 - - 5.4893ms
2021-04-17 12:20:58.865 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/auth application/json 40
2021-04-17 12:20:58.870 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:20:58.873 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 12:20:58.878 -05:00 [INF] Route matched with {action = "Valida", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Valida(ApiVentas.ApiRest.Managers.DTO.LoginRequestDTO) on controller ApiVentas.ApiRest.Controllers.AuthController (ApiVentas.ApiRest).
2021-04-17 12:20:58.885 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 12:20:58.899 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__ToUpper_0='?' (Size = 4000), @__clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[IdUsuario], [u].[Clave], [u].[Credencial], [u].[Rol]
FROM [Usuario] AS [u]
WHERE (UPPER([u].[Credencial]) = @__ToUpper_0) AND ([u].[Clave] = @__clave_1)
2021-04-17 12:20:58.912 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.LoginResponseDTO'.
2021-04-17 12:20:58.918 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest) in 34.9706ms
2021-04-17 12:20:58.922 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 12:20:58.924 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/auth application/json 40 - 200 - application/json;+charset=utf-8 59.3570ms
2021-04-17 12:21:05.544 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:21:05.547 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:21:05.548 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 3.7760ms
2021-04-17 12:21:05.556 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:21:05.558 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:21:05.560 -05:00 [INF] Successfully validated the token.
2021-04-17 12:21:05.561 -05:00 [INF] Authorization was successful.
2021-04-17 12:21:05.562 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 12:21:05.564 -05:00 [INF] Route matched with {action = "ListarPag", controller = "Articulo"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ListarPag(ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaParamDTO) on controller ApiVentas.ApiRest.Controllers.ArticuloController (ApiVentas.ApiRest).
2021-04-17 12:21:07.067 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 12:21:07.076 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DBO].[Product] AS [p]
2021-04-17 12:21:07.085 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ProductId], [t].[Nombre], [t].[Precio], [p0].[IdArticuloImagen], [p0].[IdArticulo], [p0].[NombreArchivo], [p0].[NombreGenerado]
FROM (
    SELECT [p].[ProductId], [p].[Nombre], [p].[Precio]
    FROM [DBO].[Product] AS [p]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [DBO].[ProductImage] AS [p0] ON [t].[ProductId] = [p0].[IdArticulo]
ORDER BY [t].[ProductId], [p0].[IdArticuloImagen]
2021-04-17 12:21:07.098 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaDTO'.
2021-04-17 12:21:07.101 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest) in 1526.5867ms
2021-04-17 12:21:07.109 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 12:21:07.114 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 200 - application/json;+charset=utf-8 1558.1854ms
2021-04-17 12:21:51.234 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:21:51.241 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:21:51.243 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 8.8967ms
2021-04-17 12:21:51.256 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:21:51.268 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:21:51.271 -05:00 [INF] Successfully validated the token.
2021-04-17 12:21:51.272 -05:00 [INF] Authorization was successful.
2021-04-17 12:21:51.275 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 12:21:51.280 -05:00 [INF] Route matched with {action = "ListarPag", controller = "Articulo"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ListarPag(ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaParamDTO) on controller ApiVentas.ApiRest.Controllers.ArticuloController (ApiVentas.ApiRest).
2021-04-17 12:21:55.149 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 12:21:55.163 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DBO].[Product] AS [p]
2021-04-17 12:21:55.176 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ProductId], [t].[Nombre], [t].[Precio], [p0].[IdArticuloImagen], [p0].[IdArticulo], [p0].[NombreArchivo], [p0].[NombreGenerado]
FROM (
    SELECT [p].[ProductId], [p].[Nombre], [p].[Precio]
    FROM [DBO].[Product] AS [p]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [DBO].[ProductImage] AS [p0] ON [t].[ProductId] = [p0].[IdArticulo]
ORDER BY [t].[ProductId], [p0].[IdArticuloImagen]
2021-04-17 12:21:55.190 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaDTO'.
2021-04-17 12:21:55.192 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest) in 3905.0264ms
2021-04-17 12:21:55.201 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 12:21:55.205 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 200 - application/json;+charset=utf-8 3949.2158ms
2021-04-17 12:22:32.545 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/Listar - -
2021-04-17 12:22:32.547 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:22:32.548 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/Listar - - - 204 - - 2.8635ms
2021-04-17 12:22:32.553 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/Listar - -
2021-04-17 12:22:32.554 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:22:32.557 -05:00 [INF] Successfully validated the token.
2021-04-17 12:22:32.562 -05:00 [INF] Authorization was successful.
2021-04-17 12:22:32.564 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.Listar (ApiVentas.ApiRest)'
2021-04-17 12:22:32.571 -05:00 [INF] Route matched with {action = "Listar", controller = "Articulo"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Listar() on controller ApiVentas.ApiRest.Controllers.ArticuloController (ApiVentas.ApiRest).
2021-04-17 12:22:32.582 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 12:22:32.600 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductId], [p].[Nombre], [p].[Precio]
FROM [DBO].[Product] AS [p]
2021-04-17 12:22:32.615 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApiVentas.ApiRest.Managers.DTO.ProductoDTO, ApiVentas.ApiRest, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-04-17 12:22:32.621 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.ArticuloController.Listar (ApiVentas.ApiRest) in 40.874ms
2021-04-17 12:22:32.629 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.Listar (ApiVentas.ApiRest)'
2021-04-17 12:22:32.631 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/Listar - - - 200 - application/json;+charset=utf-8 77.9445ms
2021-04-17 12:23:58.292 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:23:58.304 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:23:58.306 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 14.1600ms
2021-04-17 12:23:58.320 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:23:58.322 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:23:58.326 -05:00 [INF] Successfully validated the token.
2021-04-17 12:23:58.328 -05:00 [INF] Authorization was successful.
2021-04-17 12:23:58.329 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 12:23:58.331 -05:00 [INF] Route matched with {action = "ListarPag", controller = "Articulo"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ListarPag(ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaParamDTO) on controller ApiVentas.ApiRest.Controllers.ArticuloController (ApiVentas.ApiRest).
2021-04-17 12:24:02.872 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 12:24:02.880 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DBO].[Product] AS [p]
2021-04-17 12:24:02.894 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ProductId], [t].[Nombre], [t].[Precio], [p0].[IdArticuloImagen], [p0].[IdArticulo], [p0].[NombreArchivo], [p0].[NombreGenerado]
FROM (
    SELECT [p].[ProductId], [p].[Nombre], [p].[Precio]
    FROM [DBO].[Product] AS [p]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [DBO].[ProductImage] AS [p0] ON [t].[ProductId] = [p0].[IdArticulo]
ORDER BY [t].[ProductId], [p0].[IdArticuloImagen]
2021-04-17 12:24:02.907 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaDTO'.
2021-04-17 12:24:02.912 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest) in 4571.4437ms
2021-04-17 12:24:02.925 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 12:24:02.933 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 200 - application/json;+charset=utf-8 4613.3121ms
2021-04-17 12:24:07.160 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/Recuperar?id=2 - -
2021-04-17 12:24:07.163 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:24:07.167 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/Recuperar?id=2 - - - 204 - - 6.5574ms
2021-04-17 12:24:07.170 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/Recuperar?id=2 - -
2021-04-17 12:24:07.173 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:24:07.176 -05:00 [INF] Successfully validated the token.
2021-04-17 12:24:07.180 -05:00 [INF] Authorization was successful.
2021-04-17 12:24:07.182 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.Recuperar (ApiVentas.ApiRest)'
2021-04-17 12:24:07.190 -05:00 [INF] Route matched with {action = "Recuperar", controller = "Articulo"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Recuperar(Int32) on controller ApiVentas.ApiRest.Controllers.ArticuloController (ApiVentas.ApiRest).
2021-04-17 12:24:09.615 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 12:24:09.660 -05:00 [INF] Executed DbCommand (33ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Nombre], [p].[Precio]
FROM [DBO].[Product] AS [p]
WHERE [p].[ProductId] = @__id_0
2021-04-17 12:24:12.896 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.ProductoDTO'.
2021-04-17 12:24:12.898 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.ArticuloController.Recuperar (ApiVentas.ApiRest) in 5702.0456ms
2021-04-17 12:24:12.902 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.Recuperar (ApiVentas.ApiRest)'
2021-04-17 12:24:12.905 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/Recuperar?id=2 - - - 200 - application/json;+charset=utf-8 5734.9652ms
2021-04-17 12:26:25.050 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:26:25.067 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:26:25.069 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 19.3759ms
2021-04-17 12:26:25.074 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:26:25.079 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:26:25.081 -05:00 [INF] Successfully validated the token.
2021-04-17 12:26:25.082 -05:00 [INF] Authorization was successful.
2021-04-17 12:26:25.083 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 12:26:25.085 -05:00 [INF] Route matched with {action = "ListarPag", controller = "Articulo"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ListarPag(ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaParamDTO) on controller ApiVentas.ApiRest.Controllers.ArticuloController (ApiVentas.ApiRest).
2021-04-17 12:26:25.092 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 12:26:25.102 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DBO].[Product] AS [p]
2021-04-17 12:26:25.116 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ProductId], [t].[Nombre], [t].[Precio], [p0].[IdArticuloImagen], [p0].[IdArticulo], [p0].[NombreArchivo], [p0].[NombreGenerado]
FROM (
    SELECT [p].[ProductId], [p].[Nombre], [p].[Precio]
    FROM [DBO].[Product] AS [p]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [DBO].[ProductImage] AS [p0] ON [t].[ProductId] = [p0].[IdArticulo]
ORDER BY [t].[ProductId], [p0].[IdArticuloImagen]
2021-04-17 12:26:25.126 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaDTO'.
2021-04-17 12:26:25.129 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest) in 37.5608ms
2021-04-17 12:26:25.131 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 12:26:25.133 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 200 - application/json;+charset=utf-8 58.5829ms
2021-04-17 12:27:54.252 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Auth application/json 40
2021-04-17 12:27:54.259 -05:00 [INF] CORS policy execution failed.
2021-04-17 12:27:54.262 -05:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2021-04-17 12:27:54.265 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 12:27:54.270 -05:00 [INF] Route matched with {action = "Valida", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Valida(ApiVentas.ApiRest.Managers.DTO.LoginRequestDTO) on controller ApiVentas.ApiRest.Controllers.AuthController (ApiVentas.ApiRest).
2021-04-17 12:27:54.276 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 12:27:54.291 -05:00 [INF] Executed DbCommand (10ms) [Parameters=[@__ToUpper_0='?' (Size = 4000), @__clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[IdUsuario], [u].[Clave], [u].[Credencial], [u].[Rol]
FROM [Usuario] AS [u]
WHERE (UPPER([u].[Credencial]) = @__ToUpper_0) AND ([u].[Clave] = @__clave_1)
2021-04-17 12:27:54.306 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.LoginResponseDTO'.
2021-04-17 12:27:54.312 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest) in 36.6214ms
2021-04-17 12:27:54.316 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 12:27:54.319 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Auth application/json 40 - 200 - application/json;+charset=utf-8 66.6666ms
2021-04-17 12:28:28.371 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/Listar - -
2021-04-17 12:28:28.378 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 12:28:28.382 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 12:28:28.384 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/Listar - - - 401 0 - 12.3268ms
2021-04-17 12:28:46.595 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/Listar - -
2021-04-17 12:28:46.597 -05:00 [INF] Successfully validated the token.
2021-04-17 12:28:46.600 -05:00 [INF] Authorization was successful.
2021-04-17 12:28:46.603 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.Listar (ApiVentas.ApiRest)'
2021-04-17 12:28:46.606 -05:00 [INF] Route matched with {action = "Listar", controller = "Articulo"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Listar() on controller ApiVentas.ApiRest.Controllers.ArticuloController (ApiVentas.ApiRest).
2021-04-17 12:28:46.623 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 12:28:46.630 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductId], [p].[Nombre], [p].[Precio]
FROM [DBO].[Product] AS [p]
2021-04-17 12:28:46.640 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApiVentas.ApiRest.Managers.DTO.ProductoDTO, ApiVentas.ApiRest, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-04-17 12:28:46.649 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.ArticuloController.Listar (ApiVentas.ApiRest) in 27.2139ms
2021-04-17 12:28:46.665 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.Listar (ApiVentas.ApiRest)'
2021-04-17 12:28:46.673 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/Listar - - - 200 - application/json;+charset=utf-8 78.5516ms
2021-04-17 12:30:53.711 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:30:53.761 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:30:53.763 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 51.9630ms
2021-04-17 12:30:53.766 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:30:53.769 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:30:53.771 -05:00 [INF] Successfully validated the token.
2021-04-17 12:30:53.772 -05:00 [INF] Authorization was successful.
2021-04-17 12:30:53.774 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 12:30:53.776 -05:00 [INF] Route matched with {action = "ListarPag", controller = "Articulo"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ListarPag(ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaParamDTO) on controller ApiVentas.ApiRest.Controllers.ArticuloController (ApiVentas.ApiRest).
2021-04-17 12:30:53.787 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 12:30:53.795 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DBO].[Product] AS [p]
2021-04-17 12:30:53.815 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ProductId], [t].[Nombre], [t].[Precio], [p0].[IdArticuloImagen], [p0].[IdArticulo], [p0].[NombreArchivo], [p0].[NombreGenerado]
FROM (
    SELECT [p].[ProductId], [p].[Nombre], [p].[Precio]
    FROM [DBO].[Product] AS [p]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [DBO].[ProductImage] AS [p0] ON [t].[ProductId] = [p0].[IdArticulo]
ORDER BY [t].[ProductId], [p0].[IdArticuloImagen]
2021-04-17 12:30:53.824 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaDTO'.
2021-04-17 12:30:53.830 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest) in 43.673ms
2021-04-17 12:30:53.835 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 12:30:53.837 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 200 - application/json;+charset=utf-8 71.0917ms
2021-04-17 12:30:53.931 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:30:53.934 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:30:53.936 -05:00 [INF] Successfully validated the token.
2021-04-17 12:30:53.937 -05:00 [INF] Authorization was successful.
2021-04-17 12:30:53.940 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 12:30:53.942 -05:00 [INF] Route matched with {action = "ListarPag", controller = "Articulo"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ListarPag(ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaParamDTO) on controller ApiVentas.ApiRest.Controllers.ArticuloController (ApiVentas.ApiRest).
2021-04-17 12:30:53.947 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 12:30:53.950 -05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DBO].[Product] AS [p]
2021-04-17 12:30:53.960 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ProductId], [t].[Nombre], [t].[Precio], [p0].[IdArticuloImagen], [p0].[IdArticulo], [p0].[NombreArchivo], [p0].[NombreGenerado]
FROM (
    SELECT [p].[ProductId], [p].[Nombre], [p].[Precio]
    FROM [DBO].[Product] AS [p]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [DBO].[ProductImage] AS [p0] ON [t].[ProductId] = [p0].[IdArticulo]
ORDER BY [t].[ProductId], [p0].[IdArticuloImagen]
2021-04-17 12:30:53.977 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaDTO'.
2021-04-17 12:30:53.981 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest) in 34.7013ms
2021-04-17 12:30:53.991 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 12:30:53.993 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 200 - application/json;+charset=utf-8 62.2649ms
2021-04-17 12:33:42.012 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:33:42.014 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:33:42.015 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 3.4460ms
2021-04-17 12:33:42.022 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:33:42.024 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:33:42.027 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-04-17 12:33:42.047 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2021-04-17 12:33:42.049 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 12:33:42.053 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 12:33:42.057 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 34.6927ms
2021-04-17 12:33:42.060 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:33:42.062 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:33:42.065 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-04-17 12:33:42.083 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2021-04-17 12:33:42.088 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 12:33:42.093 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 12:33:42.095 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 35.3953ms
2021-04-17 12:34:10.726 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:34:10.729 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:34:10.731 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 4.6595ms
2021-04-17 12:34:10.738 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:34:10.741 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:34:10.743 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-04-17 12:34:10.755 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2021-04-17 12:34:10.758 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 12:34:10.760 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 12:34:10.761 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 23.2632ms
2021-04-17 12:34:29.523 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:34:29.526 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:34:29.528 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 4.3914ms
2021-04-17 12:34:29.535 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:34:29.537 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:34:29.539 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-04-17 12:34:29.545 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2021-04-17 12:34:29.556 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 12:34:29.559 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 12:34:29.562 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 26.6395ms
2021-04-17 12:50:34.351 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:50:34.358 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:50:34.360 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 9.0937ms
2021-04-17 12:50:34.370 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:50:34.375 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:50:34.380 -05:00 [INF] Failed to validate the token.
System.ArgumentException: IDX12729: Unable to decode the header 'System.String' as Base64Url encoded string. jwtEncodedString: 'System.String'.
 ---> System.FormatException: IDX10400: Unable to decode: 'System.String' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.DecodeBytes(String str)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(String arg)
   at System.IdentityModel.Tokens.Jwt.JwtHeader.Base64UrlDeserialize(String base64UrlEncodedJsonString)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityToken.Decode(String[] tokenParts, String rawData)
   --- End of inner exception stack trace ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityToken.Decode(String[] tokenParts, String rawData)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ReadJwtToken(String token)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-04-17 12:50:34.501 -05:00 [INF] Bearer was not authenticated. Failure message: IDX12729: Unable to decode the header 'System.String' as Base64Url encoded string. jwtEncodedString: 'System.String'.
2021-04-17 12:50:34.507 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 12:50:34.510 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 12:50:34.519 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 148.9173ms
2021-04-17 12:51:19.488 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/auth - -
2021-04-17 12:51:19.504 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:51:19.507 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/auth - - - 204 - - 18.2036ms
2021-04-17 12:51:19.513 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/auth application/json 40
2021-04-17 12:51:19.518 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:51:19.521 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 12:51:19.525 -05:00 [INF] Route matched with {action = "Valida", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Valida(ApiVentas.ApiRest.Managers.DTO.LoginRequestDTO) on controller ApiVentas.ApiRest.Controllers.AuthController (ApiVentas.ApiRest).
2021-04-17 12:51:19.532 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 12:51:19.544 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__ToUpper_0='?' (Size = 4000), @__clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[IdUsuario], [u].[Clave], [u].[Credencial], [u].[Rol]
FROM [Usuario] AS [u]
WHERE (UPPER([u].[Credencial]) = @__ToUpper_0) AND ([u].[Clave] = @__clave_1)
2021-04-17 12:51:19.557 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.LoginResponseDTO'.
2021-04-17 12:51:19.559 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest) in 29.1476ms
2021-04-17 12:51:19.562 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 12:51:19.566 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/auth application/json 40 - 200 - application/json;+charset=utf-8 52.6381ms
2021-04-17 12:51:30.148 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:51:30.150 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:51:30.153 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 5.2933ms
2021-04-17 12:51:30.155 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:51:30.158 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:51:30.160 -05:00 [INF] Successfully validated the token.
2021-04-17 12:51:30.164 -05:00 [INF] Authorization was successful.
2021-04-17 12:51:30.166 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 12:51:30.170 -05:00 [INF] Route matched with {action = "ListarPag", controller = "Articulo"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ListarPag(ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaParamDTO) on controller ApiVentas.ApiRest.Controllers.ArticuloController (ApiVentas.ApiRest).
2021-04-17 12:51:30.176 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 12:51:30.183 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DBO].[Product] AS [p]
2021-04-17 12:51:30.288 -05:00 [INF] Executed DbCommand (88ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ProductId], [t].[Nombre], [t].[Precio], [p0].[IdArticuloImagen], [p0].[IdArticulo], [p0].[NombreArchivo], [p0].[NombreGenerado]
FROM (
    SELECT [p].[ProductId], [p].[Nombre], [p].[Precio]
    FROM [DBO].[Product] AS [p]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [DBO].[ProductImage] AS [p0] ON [t].[ProductId] = [p0].[IdArticulo]
ORDER BY [t].[ProductId], [p0].[IdArticuloImagen]
2021-04-17 12:51:30.296 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaDTO'.
2021-04-17 12:51:30.300 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest) in 125.3062ms
2021-04-17 12:51:30.304 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 12:51:30.305 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 200 - application/json;+charset=utf-8 149.9954ms
2021-04-17 12:51:42.371 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/Recuperar?id=3 - -
2021-04-17 12:51:42.373 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:51:42.377 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/Recuperar?id=3 - - - 204 - - 5.5451ms
2021-04-17 12:51:42.380 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/Recuperar?id=3 - -
2021-04-17 12:51:42.383 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:51:42.386 -05:00 [INF] Successfully validated the token.
2021-04-17 12:51:42.388 -05:00 [INF] Authorization was successful.
2021-04-17 12:51:42.390 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.Recuperar (ApiVentas.ApiRest)'
2021-04-17 12:51:42.396 -05:00 [INF] Route matched with {action = "Recuperar", controller = "Articulo"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Recuperar(Int32) on controller ApiVentas.ApiRest.Controllers.ArticuloController (ApiVentas.ApiRest).
2021-04-17 12:51:46.140 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 12:51:46.153 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductId], [p].[Nombre], [p].[Precio]
FROM [DBO].[Product] AS [p]
WHERE [p].[ProductId] = @__id_0
2021-04-17 12:51:46.170 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.ProductoDTO'.
2021-04-17 12:51:46.175 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.ArticuloController.Recuperar (ApiVentas.ApiRest) in 3771.512ms
2021-04-17 12:51:46.185 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.Recuperar (ApiVentas.ApiRest)'
2021-04-17 12:51:46.189 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/Recuperar?id=3 - - - 200 - application/json;+charset=utf-8 3808.9310ms
2021-04-17 12:51:50.303 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:51:50.307 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:51:50.313 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 9.5981ms
2021-04-17 12:51:50.316 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:51:50.318 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:51:50.322 -05:00 [INF] Successfully validated the token.
2021-04-17 12:51:50.323 -05:00 [INF] Authorization was successful.
2021-04-17 12:51:50.326 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 12:51:50.329 -05:00 [INF] Route matched with {action = "ListarPag", controller = "Articulo"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ListarPag(ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaParamDTO) on controller ApiVentas.ApiRest.Controllers.ArticuloController (ApiVentas.ApiRest).
2021-04-17 12:51:50.343 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 12:51:50.349 -05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DBO].[Product] AS [p]
2021-04-17 12:51:50.360 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ProductId], [t].[Nombre], [t].[Precio], [p0].[IdArticuloImagen], [p0].[IdArticulo], [p0].[NombreArchivo], [p0].[NombreGenerado]
FROM (
    SELECT [p].[ProductId], [p].[Nombre], [p].[Precio]
    FROM [DBO].[Product] AS [p]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [DBO].[ProductImage] AS [p0] ON [t].[ProductId] = [p0].[IdArticulo]
ORDER BY [t].[ProductId], [p0].[IdArticuloImagen]
2021-04-17 12:51:50.370 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaDTO'.
2021-04-17 12:51:50.375 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest) in 33.2075ms
2021-04-17 12:51:50.379 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 12:51:50.385 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 200 - application/json;+charset=utf-8 69.5505ms
2021-04-17 12:51:59.191 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:51:59.193 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:51:59.194 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 3.4684ms
2021-04-17 12:51:59.200 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:51:59.203 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:51:59.217 -05:00 [INF] Failed to validate the token.
System.ArgumentException: IDX12729: Unable to decode the header 'System.String' as Base64Url encoded string. jwtEncodedString: 'System.String'.
 ---> Microsoft.IdentityModel.Json.JsonReaderException: Unexpected character encountered while parsing number: y. Path 'alg', line 1, position 8.
   at Microsoft.IdentityModel.Json.JsonTextReader.ReadNumberCharIntoBuffer(Char currentChar, Int32 charPos)
   at Microsoft.IdentityModel.Json.JsonTextReader.ReadNumberIntoBuffer()
   at Microsoft.IdentityModel.Json.JsonTextReader.ParseNumber(ReadType readType)
   at Microsoft.IdentityModel.Json.JsonTextReader.ParseValue()
   at Microsoft.IdentityModel.Json.JsonReader.ReadForType(JsonContract contract, Boolean hasConverter)
   at Microsoft.IdentityModel.Json.Serialization.JsonSerializerInternalReader.PopulateDictionary(IDictionary dictionary, JsonReader reader, JsonDictionaryContract contract, JsonProperty containerProperty, String id)
   at Microsoft.IdentityModel.Json.Serialization.JsonSerializerInternalReader.CreateObject(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Microsoft.IdentityModel.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Microsoft.IdentityModel.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType, Boolean checkAdditionalContent)
   at Microsoft.IdentityModel.Json.JsonSerializer.DeserializeInternal(JsonReader reader, Type objectType)
   at Microsoft.IdentityModel.Json.JsonConvert.DeserializeObject(String value, Type type, JsonSerializerSettings settings)
   at System.IdentityModel.Tokens.Jwt.JsonExtensions.DeserializeJwtHeader(String jsonString)
   at System.IdentityModel.Tokens.Jwt.JwtHeader.Base64UrlDeserialize(String base64UrlEncodedJsonString)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityToken.Decode(String[] tokenParts, String rawData)
   --- End of inner exception stack trace ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityToken.Decode(String[] tokenParts, String rawData)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ReadJwtToken(String token)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-04-17 12:51:59.268 -05:00 [INF] Bearer was not authenticated. Failure message: IDX12729: Unable to decode the header 'System.String' as Base64Url encoded string. jwtEncodedString: 'System.String'.
2021-04-17 12:51:59.276 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 12:51:59.284 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 12:51:59.293 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 92.7385ms
2021-04-17 12:52:23.832 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/auth - -
2021-04-17 12:52:23.835 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:52:23.838 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/auth - - - 204 - - 6.1007ms
2021-04-17 12:52:23.851 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/auth application/json 40
2021-04-17 12:52:23.855 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:52:23.856 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 12:52:23.861 -05:00 [INF] Route matched with {action = "Valida", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Valida(ApiVentas.ApiRest.Managers.DTO.LoginRequestDTO) on controller ApiVentas.ApiRest.Controllers.AuthController (ApiVentas.ApiRest).
2021-04-17 12:52:23.865 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 12:52:23.878 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__ToUpper_0='?' (Size = 4000), @__clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[IdUsuario], [u].[Clave], [u].[Credencial], [u].[Rol]
FROM [Usuario] AS [u]
WHERE (UPPER([u].[Credencial]) = @__ToUpper_0) AND ([u].[Clave] = @__clave_1)
2021-04-17 12:52:23.889 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.LoginResponseDTO'.
2021-04-17 12:52:23.894 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest) in 29.8037ms
2021-04-17 12:52:23.897 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 12:52:23.901 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/auth application/json 40 - 200 - application/json;+charset=utf-8 49.3114ms
2021-04-17 12:52:37.882 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:52:37.884 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:52:37.885 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 2.8502ms
2021-04-17 12:52:37.891 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:52:37.894 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:52:37.897 -05:00 [INF] Failed to validate the token.
System.ArgumentException: IDX12729: Unable to decode the header 'System.String' as Base64Url encoded string. jwtEncodedString: 'System.String'.
 ---> Microsoft.IdentityModel.Json.JsonReaderException: Invalid Unicode escape sequence: \u�\u�. Path 'alg', line 1, position 10.
   at Microsoft.IdentityModel.Json.JsonTextReader.ConvertUnicode(Boolean enoughChars)
   at Microsoft.IdentityModel.Json.JsonTextReader.ReadStringIntoBuffer(Char quote)
   at Microsoft.IdentityModel.Json.JsonTextReader.ParseString(Char quote, ReadType readType)
   at Microsoft.IdentityModel.Json.JsonTextReader.ParseValue()
   at Microsoft.IdentityModel.Json.JsonReader.ReadForType(JsonContract contract, Boolean hasConverter)
   at Microsoft.IdentityModel.Json.Serialization.JsonSerializerInternalReader.PopulateDictionary(IDictionary dictionary, JsonReader reader, JsonDictionaryContract contract, JsonProperty containerProperty, String id)
   at Microsoft.IdentityModel.Json.Serialization.JsonSerializerInternalReader.CreateObject(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Microsoft.IdentityModel.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Microsoft.IdentityModel.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType, Boolean checkAdditionalContent)
   at Microsoft.IdentityModel.Json.JsonSerializer.DeserializeInternal(JsonReader reader, Type objectType)
   at Microsoft.IdentityModel.Json.JsonConvert.DeserializeObject(String value, Type type, JsonSerializerSettings settings)
   at System.IdentityModel.Tokens.Jwt.JsonExtensions.DeserializeJwtHeader(String jsonString)
   at System.IdentityModel.Tokens.Jwt.JwtHeader.Base64UrlDeserialize(String base64UrlEncodedJsonString)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityToken.Decode(String[] tokenParts, String rawData)
   --- End of inner exception stack trace ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityToken.Decode(String[] tokenParts, String rawData)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ReadJwtToken(String token)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-04-17 12:52:37.923 -05:00 [INF] Bearer was not authenticated. Failure message: IDX12729: Unable to decode the header 'System.String' as Base64Url encoded string. jwtEncodedString: 'System.String'.
2021-04-17 12:52:37.925 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 12:52:37.927 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 12:52:37.928 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 37.7636ms
2021-04-17 12:53:11.351 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/auth - -
2021-04-17 12:53:11.354 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:53:11.359 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/auth - - - 204 - - 8.0355ms
2021-04-17 12:53:11.366 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/auth application/json 40
2021-04-17 12:53:11.368 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:53:11.373 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 12:53:11.377 -05:00 [INF] Route matched with {action = "Valida", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Valida(ApiVentas.ApiRest.Managers.DTO.LoginRequestDTO) on controller ApiVentas.ApiRest.Controllers.AuthController (ApiVentas.ApiRest).
2021-04-17 12:53:11.380 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 12:53:11.388 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__ToUpper_0='?' (Size = 4000), @__clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[IdUsuario], [u].[Clave], [u].[Credencial], [u].[Rol]
FROM [Usuario] AS [u]
WHERE (UPPER([u].[Credencial]) = @__ToUpper_0) AND ([u].[Clave] = @__clave_1)
2021-04-17 12:53:11.411 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.LoginResponseDTO'.
2021-04-17 12:53:11.413 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest) in 33.5251ms
2021-04-17 12:53:11.416 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 12:53:11.419 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/auth application/json 40 - 200 - application/json;+charset=utf-8 53.1243ms
2021-04-17 12:53:56.590 -05:00 [INF] User profile is available. Using 'C:\Users\Miguelon\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-04-17 12:53:56.982 -05:00 [INF] Now listening on: http://localhost:5000
2021-04-17 12:53:56.984 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-04-17 12:53:56.986 -05:00 [INF] Hosting environment: Development
2021-04-17 12:53:56.987 -05:00 [INF] Content root path: D:\Cursos\Galaxy\Net5-Grupo01\Sesion07\Ejercicios\ApiVentas\ApiVentas.ApiRest
2021-04-17 12:53:58.347 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.html - -
2021-04-17 12:53:58.545 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.html - - - 200 - text/html;charset=utf-8 199.8053ms
2021-04-17 12:53:58.812 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - -
2021-04-17 12:53:59.020 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 201.0850ms
2021-04-17 12:54:04.009 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:54:04.082 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:54:04.085 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 75.7436ms
2021-04-17 12:54:04.086 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:54:04.088 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:54:04.435 -05:00 [INF] Successfully validated the token.
2021-04-17 12:54:04.447 -05:00 [INF] Authorization was successful.
2021-04-17 12:54:04.449 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 12:54:04.497 -05:00 [INF] Route matched with {action = "ListarPag", controller = "Articulo"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ListarPag(ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaParamDTO) on controller ApiVentas.ApiRest.Controllers.ArticuloController (ApiVentas.ApiRest).
2021-04-17 12:54:05.928 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 12:54:06.329 -05:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DBO].[Product] AS [p]
2021-04-17 12:54:06.427 -05:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results.
2021-04-17 12:54:06.431 -05:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results.
2021-04-17 12:54:06.655 -05:00 [INF] Executed DbCommand (19ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ProductId], [t].[Nombre], [t].[Precio], [p0].[IdArticuloImagen], [p0].[IdArticulo], [p0].[NombreArchivo], [p0].[NombreGenerado]
FROM (
    SELECT [p].[ProductId], [p].[Nombre], [p].[Precio]
    FROM [DBO].[Product] AS [p]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [DBO].[ProductImage] AS [p0] ON [t].[ProductId] = [p0].[IdArticulo]
ORDER BY [t].[ProductId], [p0].[IdArticuloImagen]
2021-04-17 12:54:06.701 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaDTO'.
2021-04-17 12:54:06.722 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:54:06.725 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest) in 2218.3308ms
2021-04-17 12:54:06.727 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:54:06.739 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 12:54:06.744 -05:00 [INF] Successfully validated the token.
2021-04-17 12:54:06.752 -05:00 [INF] Authorization was successful.
2021-04-17 12:54:06.754 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 200 - application/json;+charset=utf-8 2667.8676ms
2021-04-17 12:54:06.755 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 12:54:06.761 -05:00 [INF] Route matched with {action = "ListarPag", controller = "Articulo"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ListarPag(ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaParamDTO) on controller ApiVentas.ApiRest.Controllers.ArticuloController (ApiVentas.ApiRest).
2021-04-17 12:54:06.817 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 12:54:06.823 -05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DBO].[Product] AS [p]
2021-04-17 12:54:06.833 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ProductId], [t].[Nombre], [t].[Precio], [p0].[IdArticuloImagen], [p0].[IdArticulo], [p0].[NombreArchivo], [p0].[NombreGenerado]
FROM (
    SELECT [p].[ProductId], [p].[Nombre], [p].[Precio]
    FROM [DBO].[Product] AS [p]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [DBO].[ProductImage] AS [p0] ON [t].[ProductId] = [p0].[IdArticulo]
ORDER BY [t].[ProductId], [p0].[IdArticuloImagen]
2021-04-17 12:54:06.839 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaDTO'.
2021-04-17 12:54:06.847 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest) in 74.1948ms
2021-04-17 12:54:06.849 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 12:54:06.852 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 200 - application/json;+charset=utf-8 130.0645ms
2021-04-17 12:55:18.293 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:55:18.296 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:55:18.299 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 5.6670ms
2021-04-17 12:55:18.312 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:55:18.316 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:55:18.321 -05:00 [INF] Successfully validated the token.
2021-04-17 12:55:18.323 -05:00 [INF] Authorization was successful.
2021-04-17 12:55:18.326 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 12:55:18.328 -05:00 [INF] Route matched with {action = "ListarPag", controller = "Articulo"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ListarPag(ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaParamDTO) on controller ApiVentas.ApiRest.Controllers.ArticuloController (ApiVentas.ApiRest).
2021-04-17 12:55:18.345 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 12:55:18.354 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DBO].[Product] AS [p]
2021-04-17 12:55:18.369 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ProductId], [t].[Nombre], [t].[Precio], [p0].[IdArticuloImagen], [p0].[IdArticulo], [p0].[NombreArchivo], [p0].[NombreGenerado]
FROM (
    SELECT [p].[ProductId], [p].[Nombre], [p].[Precio]
    FROM [DBO].[Product] AS [p]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [DBO].[ProductImage] AS [p0] ON [t].[ProductId] = [p0].[IdArticulo]
ORDER BY [t].[ProductId], [p0].[IdArticuloImagen]
2021-04-17 12:55:18.380 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaDTO'.
2021-04-17 12:55:18.385 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest) in 51.3559ms
2021-04-17 12:55:18.395 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 12:55:18.400 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 200 - application/json;+charset=utf-8 87.8168ms
2021-04-17 12:55:34.740 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:55:34.742 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:55:34.744 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 3.5315ms
2021-04-17 12:55:34.751 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:55:34.756 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:55:34.802 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidSignatureException: IDX10503: Signature validation failed. Keys tried: 'System.Text.StringBuilder'.
Exceptions caught:
 'System.Text.StringBuilder'.
token: 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken'.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-04-17 12:55:34.813 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Keys tried: 'System.Text.StringBuilder'.
Exceptions caught:
 'System.Text.StringBuilder'.
token: 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken'.
2021-04-17 12:55:34.820 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 12:55:34.836 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 12:55:34.840 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 88.5454ms
2021-04-17 12:56:42.337 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/auth - -
2021-04-17 12:56:42.340 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:56:42.343 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/auth - - - 204 - - 5.9533ms
2021-04-17 12:56:42.363 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/auth application/json 40
2021-04-17 12:56:42.365 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:56:42.368 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 12:56:42.378 -05:00 [INF] Route matched with {action = "Valida", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Valida(ApiVentas.ApiRest.Managers.DTO.LoginRequestDTO) on controller ApiVentas.ApiRest.Controllers.AuthController (ApiVentas.ApiRest).
2021-04-17 12:56:42.404 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 12:56:42.474 -05:00 [INF] Executed DbCommand (16ms) [Parameters=[@__ToUpper_0='?' (Size = 4000), @__clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[IdUsuario], [u].[Clave], [u].[Credencial], [u].[Rol]
FROM [Usuario] AS [u]
WHERE (UPPER([u].[Credencial]) = @__ToUpper_0) AND ([u].[Clave] = @__clave_1)
2021-04-17 12:56:42.592 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.LoginResponseDTO'.
2021-04-17 12:56:42.596 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest) in 211.1484ms
2021-04-17 12:56:42.599 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 12:56:42.604 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/auth application/json 40 - 200 - application/json;+charset=utf-8 241.4108ms
2021-04-17 12:56:54.020 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:56:54.023 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:56:54.025 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 4.9500ms
2021-04-17 12:56:54.029 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:56:54.035 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:56:54.039 -05:00 [INF] Failed to validate the token.
System.ArgumentException: IDX12729: Unable to decode the header 'System.String' as Base64Url encoded string. jwtEncodedString: 'System.String'.
 ---> System.FormatException: IDX10400: Unable to decode: 'System.String' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.DecodeBytes(String str)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(String arg)
   at System.IdentityModel.Tokens.Jwt.JwtHeader.Base64UrlDeserialize(String base64UrlEncodedJsonString)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityToken.Decode(String[] tokenParts, String rawData)
   --- End of inner exception stack trace ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityToken.Decode(String[] tokenParts, String rawData)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ReadJwtToken(String token)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-04-17 12:56:54.061 -05:00 [INF] Bearer was not authenticated. Failure message: IDX12729: Unable to decode the header 'System.String' as Base64Url encoded string. jwtEncodedString: 'System.String'.
2021-04-17 12:56:54.065 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 12:56:54.072 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 12:56:54.078 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 48.1624ms
2021-04-17 12:57:14.295 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/auth - -
2021-04-17 12:57:14.298 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:57:14.301 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/auth - - - 204 - - 5.6582ms
2021-04-17 12:57:14.308 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/auth application/json 40
2021-04-17 12:57:14.321 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:57:14.325 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 12:57:14.334 -05:00 [INF] Route matched with {action = "Valida", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Valida(ApiVentas.ApiRest.Managers.DTO.LoginRequestDTO) on controller ApiVentas.ApiRest.Controllers.AuthController (ApiVentas.ApiRest).
2021-04-17 12:57:14.344 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 12:57:14.354 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__ToUpper_0='?' (Size = 4000), @__clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[IdUsuario], [u].[Clave], [u].[Credencial], [u].[Rol]
FROM [Usuario] AS [u]
WHERE (UPPER([u].[Credencial]) = @__ToUpper_0) AND ([u].[Clave] = @__clave_1)
2021-04-17 12:57:14.364 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.LoginResponseDTO'.
2021-04-17 12:57:14.368 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest) in 25.1305ms
2021-04-17 12:57:14.371 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 12:57:14.378 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/auth application/json 40 - 200 - application/json;+charset=utf-8 70.0158ms
2021-04-17 12:57:29.228 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:57:29.230 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:57:29.236 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 7.9840ms
2021-04-17 12:57:29.239 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 12:57:29.242 -05:00 [INF] CORS policy execution successful.
2021-04-17 12:57:29.253 -05:00 [INF] Failed to validate the token.
System.ArgumentException: IDX12729: Unable to decode the header 'System.String' as Base64Url encoded string. jwtEncodedString: 'System.String'.
 ---> Microsoft.IdentityModel.Json.JsonReaderException: After parsing a value an unexpected character was encountered: 6. Path 'alg', line 1, position 15.
   at Microsoft.IdentityModel.Json.JsonTextReader.ParsePostValue(Boolean ignoreComments)
   at Microsoft.IdentityModel.Json.JsonTextReader.Read()
   at Microsoft.IdentityModel.Json.Serialization.JsonSerializerInternalReader.PopulateDictionary(IDictionary dictionary, JsonReader reader, JsonDictionaryContract contract, JsonProperty containerProperty, String id)
   at Microsoft.IdentityModel.Json.Serialization.JsonSerializerInternalReader.CreateObject(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Microsoft.IdentityModel.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Microsoft.IdentityModel.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType, Boolean checkAdditionalContent)
   at Microsoft.IdentityModel.Json.JsonSerializer.DeserializeInternal(JsonReader reader, Type objectType)
   at Microsoft.IdentityModel.Json.JsonSerializer.Deserialize(JsonReader reader, Type objectType)
   at Microsoft.IdentityModel.Json.JsonConvert.DeserializeObject(String value, Type type, JsonSerializerSettings settings)
   at Microsoft.IdentityModel.Json.JsonConvert.DeserializeObject(String value, Type type)
   at System.IdentityModel.Tokens.Jwt.JsonExtensions.DeserializeJwtHeader(String jsonString)
   at System.IdentityModel.Tokens.Jwt.JwtHeader.Base64UrlDeserialize(String base64UrlEncodedJsonString)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityToken.Decode(String[] tokenParts, String rawData)
   --- End of inner exception stack trace ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityToken.Decode(String[] tokenParts, String rawData)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ReadJwtToken(String token)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-04-17 12:57:29.287 -05:00 [INF] Bearer was not authenticated. Failure message: IDX12729: Unable to decode the header 'System.String' as Base64Url encoded string. jwtEncodedString: 'System.String'.
2021-04-17 12:57:29.289 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 12:57:29.291 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 12:57:29.314 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 75.1107ms
2021-04-17 13:00:32.633 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Auth application/json 40
2021-04-17 13:00:57.382 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/Auth application/json 40
2021-04-17 13:01:08.363 -05:00 [INF] CORS policy execution failed.
2021-04-17 13:01:08.365 -05:00 [INF] CORS policy execution failed.
2021-04-17 13:01:08.366 -05:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2021-04-17 13:01:08.367 -05:00 [INF] Request origin http://localhost:5000 does not have permission to access the resource.
2021-04-17 13:01:08.369 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 13:01:08.371 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 13:01:08.373 -05:00 [INF] Route matched with {action = "Valida", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Valida(ApiVentas.ApiRest.Managers.DTO.LoginRequestDTO) on controller ApiVentas.ApiRest.Controllers.AuthController (ApiVentas.ApiRest).
2021-04-17 13:01:08.390 -05:00 [INF] Route matched with {action = "Valida", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Valida(ApiVentas.ApiRest.Managers.DTO.LoginRequestDTO) on controller ApiVentas.ApiRest.Controllers.AuthController (ApiVentas.ApiRest).
2021-04-17 13:01:08.411 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:01:08.419 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:01:08.431 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__ToUpper_0='?' (Size = 4000), @__clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[IdUsuario], [u].[Clave], [u].[Credencial], [u].[Rol]
FROM [Usuario] AS [u]
WHERE (UPPER([u].[Credencial]) = @__ToUpper_0) AND ([u].[Clave] = @__clave_1)
2021-04-17 13:01:08.466 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.LoginResponseDTO'.
2021-04-17 13:01:08.467 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__ToUpper_0='?' (Size = 4000), @__clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[IdUsuario], [u].[Clave], [u].[Credencial], [u].[Rol]
FROM [Usuario] AS [u]
WHERE (UPPER([u].[Credencial]) = @__ToUpper_0) AND ([u].[Clave] = @__clave_1)
2021-04-17 13:01:08.474 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest) in 65.1508ms
2021-04-17 13:01:08.491 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.LoginResponseDTO'.
2021-04-17 13:01:08.502 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 13:01:08.505 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest) in 86.3122ms
2021-04-17 13:01:08.508 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Auth application/json 40 - 200 - application/json;+charset=utf-8 35875.0869ms
2021-04-17 13:01:08.514 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 13:01:08.526 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/Auth application/json 40 - 200 - application/json;+charset=utf-8 11144.4200ms
2021-04-17 13:01:28.653 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Opcion - -
2021-04-17 13:01:28.656 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 13:01:28.661 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 13:01:28.670 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Opcion - - - 401 0 - 17.1084ms
2021-04-17 13:02:04.519 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Opcion?rol=admin - -
2021-04-17 13:02:04.520 -05:00 [INF] Successfully validated the token.
2021-04-17 13:02:04.522 -05:00 [INF] Authorization was successful.
2021-04-17 13:02:04.523 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:02:04.546 -05:00 [INF] Route matched with {action = "Listar", controller = "Opcion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Listar(System.String) on controller ApiVentas.ApiRest.Controllers.OpcionController (ApiVentas.ApiRest).
2021-04-17 13:02:04.553 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:02:04.573 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[IdOpcion], [o].[EsAdmin], [o].[EsOperador], [o].[Icono], [o].[Nombre], [o].[Url]
FROM [Opcion] AS [o]
WHERE [o].[EsAdmin] = CAST(1 AS bit)
2021-04-17 13:02:04.804 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest) in 254.0882ms
2021-04-17 13:02:04.807 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:02:04.823 -05:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
Object -> List`1
System.Object -> System.Collections.Generic.List`1[[ApiVentas.ApiRest.Managers.DTO.OpcionDTO, ApiVentas.ApiRest, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
Opcion -> OpcionDTO
ApiVentas.ApiRest.Services.Entidades.Opcion -> ApiVentas.ApiRest.Managers.DTO.OpcionDTO
   at lambda_method128(Closure , Opcion , OpcionDTO , ResolutionContext )
   at lambda_method127(Closure , Object , List`1 , ResolutionContext )
   --- End of inner exception stack trace ---
   at lambda_method127(Closure , Object , List`1 , ResolutionContext )
   at ApiVentas.ApiRest.Managers.OpManager.SeguridadOpManager.ListarPorRol(String rol) in D:\Cursos\Galaxy\Net5-Grupo01\Sesion07\Ejercicios\ApiVentas\ApiVentas.ApiRest\Managers\OpManager\SeguridadOpManager.cs:line 82
   at ApiVentas.ApiRest.Controllers.OpcionController.Listar(String rol) in D:\Cursos\Galaxy\Net5-Grupo01\Sesion07\Ejercicios\ApiVentas\ApiVentas.ApiRest\Controllers\OpcionController.cs:line 26
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2021-04-17 13:02:04.943 -05:00 [ERR] Error inesperado: a7676511-947a-40a0-8d58-6c56c5dcff47 - AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
Object -> List`1
System.Object -> System.Collections.Generic.List`1[[ApiVentas.ApiRest.Managers.DTO.OpcionDTO, ApiVentas.ApiRest, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
Opcion -> OpcionDTO
ApiVentas.ApiRest.Services.Entidades.Opcion -> ApiVentas.ApiRest.Managers.DTO.OpcionDTO
   at lambda_method128(Closure , Opcion , OpcionDTO , ResolutionContext )
   at lambda_method127(Closure , Object , List`1 , ResolutionContext )
   --- End of inner exception stack trace ---
   at lambda_method127(Closure , Object , List`1 , ResolutionContext )
   at ApiVentas.ApiRest.Managers.OpManager.SeguridadOpManager.ListarPorRol(String rol) in D:\Cursos\Galaxy\Net5-Grupo01\Sesion07\Ejercicios\ApiVentas\ApiVentas.ApiRest\Managers\OpManager\SeguridadOpManager.cs:line 82
   at ApiVentas.ApiRest.Controllers.OpcionController.Listar(String rol) in D:\Cursos\Galaxy\Net5-Grupo01\Sesion07\Ejercicios\ApiVentas\ApiVentas.ApiRest\Controllers\OpcionController.cs:line 26
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2021-04-17 13:02:05.266 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Opcion?rol=admin - - - 500 - application/json 742.1861ms
2021-04-17 13:02:15.861 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Opcion?rol=admin - -
2021-04-17 13:02:15.863 -05:00 [INF] Successfully validated the token.
2021-04-17 13:02:15.872 -05:00 [INF] Authorization was successful.
2021-04-17 13:02:15.875 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:02:15.880 -05:00 [INF] Route matched with {action = "Listar", controller = "Opcion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Listar(System.String) on controller ApiVentas.ApiRest.Controllers.OpcionController (ApiVentas.ApiRest).
2021-04-17 13:02:23.147 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:02:23.156 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[IdOpcion], [o].[EsAdmin], [o].[EsOperador], [o].[Icono], [o].[Nombre], [o].[Url]
FROM [Opcion] AS [o]
WHERE [o].[EsAdmin] = CAST(1 AS bit)
2021-04-17 13:02:31.958 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest) in 16068.582ms
2021-04-17 13:02:31.961 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:02:31.963 -05:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
Object -> List`1
System.Object -> System.Collections.Generic.List`1[[ApiVentas.ApiRest.Managers.DTO.OpcionDTO, ApiVentas.ApiRest, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
Opcion -> OpcionDTO
ApiVentas.ApiRest.Services.Entidades.Opcion -> ApiVentas.ApiRest.Managers.DTO.OpcionDTO
   at lambda_method128(Closure , Opcion , OpcionDTO , ResolutionContext )
   at lambda_method127(Closure , Object , List`1 , ResolutionContext )
   --- End of inner exception stack trace ---
   at lambda_method127(Closure , Object , List`1 , ResolutionContext )
   at ApiVentas.ApiRest.Managers.OpManager.SeguridadOpManager.ListarPorRol(String rol) in D:\Cursos\Galaxy\Net5-Grupo01\Sesion07\Ejercicios\ApiVentas\ApiVentas.ApiRest\Managers\OpManager\SeguridadOpManager.cs:line 82
   at ApiVentas.ApiRest.Controllers.OpcionController.Listar(String rol) in D:\Cursos\Galaxy\Net5-Grupo01\Sesion07\Ejercicios\ApiVentas\ApiVentas.ApiRest\Controllers\OpcionController.cs:line 26
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2021-04-17 13:02:32.016 -05:00 [ERR] Error inesperado: 39d71792-59fd-4a9f-a370-2cb45557d74e - AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
Object -> List`1
System.Object -> System.Collections.Generic.List`1[[ApiVentas.ApiRest.Managers.DTO.OpcionDTO, ApiVentas.ApiRest, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
Opcion -> OpcionDTO
ApiVentas.ApiRest.Services.Entidades.Opcion -> ApiVentas.ApiRest.Managers.DTO.OpcionDTO
   at lambda_method128(Closure , Opcion , OpcionDTO , ResolutionContext )
   at lambda_method127(Closure , Object , List`1 , ResolutionContext )
   --- End of inner exception stack trace ---
   at lambda_method127(Closure , Object , List`1 , ResolutionContext )
   at ApiVentas.ApiRest.Managers.OpManager.SeguridadOpManager.ListarPorRol(String rol) in D:\Cursos\Galaxy\Net5-Grupo01\Sesion07\Ejercicios\ApiVentas\ApiVentas.ApiRest\Managers\OpManager\SeguridadOpManager.cs:line 82
   at ApiVentas.ApiRest.Controllers.OpcionController.Listar(String rol) in D:\Cursos\Galaxy\Net5-Grupo01\Sesion07\Ejercicios\ApiVentas\ApiVentas.ApiRest\Controllers\OpcionController.cs:line 26
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddleware.<Invoke>g__Awaited|6_0(ExceptionHandlerMiddleware middleware, HttpContext context, Task task)
2021-04-17 13:02:32.033 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Opcion?rol=admin - - - 500 - application/json 16172.3969ms
2021-04-17 13:03:57.578 -05:00 [INF] User profile is available. Using 'C:\Users\Miguelon\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-04-17 13:03:58.041 -05:00 [INF] Now listening on: http://localhost:5000
2021-04-17 13:03:58.043 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-04-17 13:03:58.044 -05:00 [INF] Hosting environment: Development
2021-04-17 13:03:58.046 -05:00 [INF] Content root path: D:\Cursos\Galaxy\Net5-Grupo01\Sesion07\Ejercicios\ApiVentas\ApiVentas.ApiRest
2021-04-17 13:03:59.184 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.html - -
2021-04-17 13:03:59.336 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.html - - - 200 - text/html;charset=utf-8 160.6859ms
2021-04-17 13:03:59.584 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - -
2021-04-17 13:03:59.775 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 191.6327ms
2021-04-17 13:04:01.639 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Opcion?rol=admin - -
2021-04-17 13:04:01.992 -05:00 [INF] Successfully validated the token.
2021-04-17 13:04:02.008 -05:00 [INF] Authorization was successful.
2021-04-17 13:04:02.012 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:04:02.066 -05:00 [INF] Route matched with {action = "Listar", controller = "Opcion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Listar(System.String) on controller ApiVentas.ApiRest.Controllers.OpcionController (ApiVentas.ApiRest).
2021-04-17 13:04:05.808 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:04:06.269 -05:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[IdOpcion], [o].[EsAdmin], [o].[EsOperador], [o].[Icono], [o].[Nombre], [o].[Url]
FROM [Opcion] AS [o]
WHERE [o].[EsAdmin] = CAST(1 AS bit)
2021-04-17 13:04:06.400 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApiVentas.ApiRest.Managers.DTO.OpcionDTO, ApiVentas.ApiRest, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-04-17 13:04:06.427 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest) in 4349.014ms
2021-04-17 13:04:06.429 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:04:06.438 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Opcion?rol=admin - - - 200 - application/json;+charset=utf-8 4798.6980ms
2021-04-17 13:04:13.392 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Opcion?rol=operador - -
2021-04-17 13:04:13.395 -05:00 [INF] Successfully validated the token.
2021-04-17 13:04:13.398 -05:00 [INF] Authorization was successful.
2021-04-17 13:04:13.400 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:04:13.404 -05:00 [INF] Route matched with {action = "Listar", controller = "Opcion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Listar(System.String) on controller ApiVentas.ApiRest.Controllers.OpcionController (ApiVentas.ApiRest).
2021-04-17 13:04:14.371 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:04:14.386 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[IdOpcion], [o].[EsAdmin], [o].[EsOperador], [o].[Icono], [o].[Nombre], [o].[Url]
FROM [Opcion] AS [o]
WHERE [o].[EsOperador] = CAST(1 AS bit)
2021-04-17 13:04:14.391 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApiVentas.ApiRest.Managers.DTO.OpcionDTO, ApiVentas.ApiRest, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-04-17 13:04:14.395 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest) in 987.3271ms
2021-04-17 13:04:14.401 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:04:14.405 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Opcion?rol=operador - - - 200 - application/json;+charset=utf-8 1012.0994ms
2021-04-17 13:24:14.509 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/auth - -
2021-04-17 13:24:14.514 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:24:14.516 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/auth - - - 204 - - 6.7237ms
2021-04-17 13:24:14.518 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/auth application/json 40
2021-04-17 13:24:14.521 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:24:14.528 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 13:24:14.540 -05:00 [INF] Route matched with {action = "Valida", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Valida(ApiVentas.ApiRest.Managers.DTO.LoginRequestDTO) on controller ApiVentas.ApiRest.Controllers.AuthController (ApiVentas.ApiRest).
2021-04-17 13:24:14.585 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:24:14.715 -05:00 [INF] Executed DbCommand (19ms) [Parameters=[@__ToUpper_0='?' (Size = 4000), @__clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[IdUsuario], [u].[Clave], [u].[Credencial], [u].[Rol]
FROM [Usuario] AS [u]
WHERE (UPPER([u].[Credencial]) = @__ToUpper_0) AND ([u].[Clave] = @__clave_1)
2021-04-17 13:24:14.757 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.LoginResponseDTO'.
2021-04-17 13:24:14.762 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest) in 218.5108ms
2021-04-17 13:24:14.768 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 13:24:14.771 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/auth application/json 40 - 200 - application/json;+charset=utf-8 252.6239ms
2021-04-17 13:24:14.826 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/ + "Opcion?rol=admin%22 - -
2021-04-17 13:24:14.829 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:24:14.830 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/ + "Opcion?rol=admin%22 - - - 204 - - 3.8878ms
2021-04-17 13:24:14.833 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ + "Opcion?rol=admin%22 - -
2021-04-17 13:24:14.835 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:24:14.838 -05:00 [INF] Successfully validated the token.
2021-04-17 13:24:15.727 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ + "Opcion?rol=admin%22 - - - 404 0 - 893.8562ms
2021-04-17 13:24:54.061 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/ +"Opcion?rol=admin%22 - -
2021-04-17 13:24:54.063 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:24:54.066 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/ +"Opcion?rol=admin%22 - - - 204 - - 5.5194ms
2021-04-17 13:24:54.080 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ +"Opcion?rol=admin%22 - -
2021-04-17 13:24:54.083 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:24:54.087 -05:00 [INF] Successfully validated the token.
2021-04-17 13:24:54.090 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ +"Opcion?rol=admin%22 - - - 404 0 - 9.0743ms
2021-04-17 13:24:57.976 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/ +"Opcion?rol=admin%22 - -
2021-04-17 13:24:57.978 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:24:57.980 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/ +"Opcion?rol=admin%22 - - - 204 - - 3.6433ms
2021-04-17 13:24:57.988 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ +"Opcion?rol=admin%22 - -
2021-04-17 13:24:57.993 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:24:57.995 -05:00 [INF] Successfully validated the token.
2021-04-17 13:24:58.001 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ +"Opcion?rol=admin%22 - - - 404 0 - 13.5953ms
2021-04-17 13:25:17.260 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/ +"Opcion?rol=admin%22 - -
2021-04-17 13:25:17.263 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:25:17.265 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/ +"Opcion?rol=admin%22 - - - 204 - - 4.6735ms
2021-04-17 13:25:17.279 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ +"Opcion?rol=admin%22 - -
2021-04-17 13:25:17.284 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:25:17.286 -05:00 [INF] Successfully validated the token.
2021-04-17 13:25:17.289 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ +"Opcion?rol=admin%22 - - - 404 0 - 9.7855ms
2021-04-17 13:25:59.612 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Opcion?rol=admin - -
2021-04-17 13:25:59.655 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:25:59.657 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Opcion?rol=admin - - - 204 - - 47.0083ms
2021-04-17 13:25:59.667 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Opcion?rol=admin - -
2021-04-17 13:25:59.668 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:25:59.671 -05:00 [INF] Successfully validated the token.
2021-04-17 13:25:59.673 -05:00 [INF] Authorization was successful.
2021-04-17 13:25:59.674 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:25:59.676 -05:00 [INF] Route matched with {action = "Listar", controller = "Opcion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Listar(System.String) on controller ApiVentas.ApiRest.Controllers.OpcionController (ApiVentas.ApiRest).
2021-04-17 13:26:05.321 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:26:05.353 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[IdOpcion], [o].[EsAdmin], [o].[EsOperador], [o].[Icono], [o].[Nombre], [o].[Url]
FROM [Opcion] AS [o]
WHERE [o].[EsAdmin] = CAST(1 AS bit)
2021-04-17 13:26:05.369 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApiVentas.ApiRest.Managers.DTO.OpcionDTO, ApiVentas.ApiRest, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-04-17 13:26:05.372 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest) in 5680.9229ms
2021-04-17 13:26:05.375 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:26:05.381 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Opcion?rol=admin - - - 200 - application/json;+charset=utf-8 5714.9613ms
2021-04-17 13:26:15.410 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Opcion?rol=admin - -
2021-04-17 13:26:15.412 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:26:15.415 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Opcion?rol=admin - - - 204 - - 3.9699ms
2021-04-17 13:26:15.424 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Opcion?rol=admin - -
2021-04-17 13:26:15.426 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:26:15.430 -05:00 [INF] Successfully validated the token.
2021-04-17 13:26:15.433 -05:00 [INF] Authorization was successful.
2021-04-17 13:26:15.438 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:26:15.443 -05:00 [INF] Route matched with {action = "Listar", controller = "Opcion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Listar(System.String) on controller ApiVentas.ApiRest.Controllers.OpcionController (ApiVentas.ApiRest).
2021-04-17 13:26:16.821 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:26:16.834 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[IdOpcion], [o].[EsAdmin], [o].[EsOperador], [o].[Icono], [o].[Nombre], [o].[Url]
FROM [Opcion] AS [o]
WHERE [o].[EsAdmin] = CAST(1 AS bit)
2021-04-17 13:26:16.841 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApiVentas.ApiRest.Managers.DTO.OpcionDTO, ApiVentas.ApiRest, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-04-17 13:26:16.845 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest) in 1392.6699ms
2021-04-17 13:26:16.851 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:26:16.854 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Opcion?rol=admin - - - 200 - application/json;+charset=utf-8 1430.0742ms
2021-04-17 13:29:17.985 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Opcion?rol=admin - -
2021-04-17 13:29:17.987 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:29:17.989 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Opcion?rol=admin - - - 204 - - 4.1193ms
2021-04-17 13:29:17.998 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Opcion?rol=admin - -
2021-04-17 13:29:18.000 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:29:18.002 -05:00 [INF] Successfully validated the token.
2021-04-17 13:29:18.004 -05:00 [INF] Authorization was successful.
2021-04-17 13:29:18.012 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:29:18.015 -05:00 [INF] Route matched with {action = "Listar", controller = "Opcion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Listar(System.String) on controller ApiVentas.ApiRest.Controllers.OpcionController (ApiVentas.ApiRest).
2021-04-17 13:29:19.767 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:29:19.798 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[IdOpcion], [o].[EsAdmin], [o].[EsOperador], [o].[Icono], [o].[Nombre], [o].[Url]
FROM [Opcion] AS [o]
WHERE [o].[EsAdmin] = CAST(1 AS bit)
2021-04-17 13:29:19.806 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApiVentas.ApiRest.Managers.DTO.OpcionDTO, ApiVentas.ApiRest, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-04-17 13:29:19.810 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest) in 1785.5947ms
2021-04-17 13:29:19.813 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:29:19.816 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Opcion?rol=admin - - - 200 - application/json;+charset=utf-8 1817.8996ms
2021-04-17 13:29:20.365 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Opcion?rol=admin - -
2021-04-17 13:29:20.366 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:29:20.368 -05:00 [INF] Successfully validated the token.
2021-04-17 13:29:20.371 -05:00 [INF] Authorization was successful.
2021-04-17 13:29:20.373 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:29:20.378 -05:00 [INF] Route matched with {action = "Listar", controller = "Opcion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Listar(System.String) on controller ApiVentas.ApiRest.Controllers.OpcionController (ApiVentas.ApiRest).
2021-04-17 13:29:21.880 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:29:21.888 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[IdOpcion], [o].[EsAdmin], [o].[EsOperador], [o].[Icono], [o].[Nombre], [o].[Url]
FROM [Opcion] AS [o]
WHERE [o].[EsAdmin] = CAST(1 AS bit)
2021-04-17 13:29:21.901 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApiVentas.ApiRest.Managers.DTO.OpcionDTO, ApiVentas.ApiRest, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-04-17 13:29:21.906 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest) in 1523.2053ms
2021-04-17 13:29:21.909 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:29:21.916 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Opcion?rol=admin - - - 200 - application/json;+charset=utf-8 1551.1835ms
2021-04-17 13:29:39.275 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/auth - -
2021-04-17 13:29:39.278 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:29:39.281 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/auth - - - 204 - - 6.5103ms
2021-04-17 13:29:39.290 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/auth application/json 39
2021-04-17 13:29:39.292 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:29:39.295 -05:00 [INF] Successfully validated the token.
2021-04-17 13:29:39.296 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 13:29:39.297 -05:00 [INF] Route matched with {action = "Valida", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Valida(ApiVentas.ApiRest.Managers.DTO.LoginRequestDTO) on controller ApiVentas.ApiRest.Controllers.AuthController (ApiVentas.ApiRest).
2021-04-17 13:29:39.304 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:29:39.316 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__ToUpper_0='?' (Size = 4000), @__clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[IdUsuario], [u].[Clave], [u].[Credencial], [u].[Rol]
FROM [Usuario] AS [u]
WHERE (UPPER([u].[Credencial]) = @__ToUpper_0) AND ([u].[Clave] = @__clave_1)
2021-04-17 13:29:39.341 -05:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2021-04-17 13:29:39.343 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest) in 41.4582ms
2021-04-17 13:29:39.346 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 13:29:39.348 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/auth application/json 39 - 400 - text/plain;+charset=utf-8 58.9428ms
2021-04-17 13:29:41.410 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/auth application/json 39
2021-04-17 13:29:41.413 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:29:41.415 -05:00 [INF] Successfully validated the token.
2021-04-17 13:29:41.419 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 13:29:41.422 -05:00 [INF] Route matched with {action = "Valida", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Valida(ApiVentas.ApiRest.Managers.DTO.LoginRequestDTO) on controller ApiVentas.ApiRest.Controllers.AuthController (ApiVentas.ApiRest).
2021-04-17 13:29:41.427 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:29:41.433 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__ToUpper_0='?' (Size = 4000), @__clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[IdUsuario], [u].[Clave], [u].[Credencial], [u].[Rol]
FROM [Usuario] AS [u]
WHERE (UPPER([u].[Credencial]) = @__ToUpper_0) AND ([u].[Clave] = @__clave_1)
2021-04-17 13:29:41.447 -05:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2021-04-17 13:29:41.453 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest) in 26.6883ms
2021-04-17 13:29:41.457 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 13:29:41.459 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/auth application/json 39 - 400 - text/plain;+charset=utf-8 48.3289ms
2021-04-17 13:29:47.572 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/auth - -
2021-04-17 13:29:47.574 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:29:47.578 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/auth - - - 204 - - 5.8744ms
2021-04-17 13:29:47.581 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/auth application/json 40
2021-04-17 13:29:47.584 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:29:47.591 -05:00 [INF] Successfully validated the token.
2021-04-17 13:29:47.593 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 13:29:47.598 -05:00 [INF] Route matched with {action = "Valida", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Valida(ApiVentas.ApiRest.Managers.DTO.LoginRequestDTO) on controller ApiVentas.ApiRest.Controllers.AuthController (ApiVentas.ApiRest).
2021-04-17 13:29:47.606 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:29:47.615 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__ToUpper_0='?' (Size = 4000), @__clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[IdUsuario], [u].[Clave], [u].[Credencial], [u].[Rol]
FROM [Usuario] AS [u]
WHERE (UPPER([u].[Credencial]) = @__ToUpper_0) AND ([u].[Clave] = @__clave_1)
2021-04-17 13:29:47.628 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.LoginResponseDTO'.
2021-04-17 13:29:47.633 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest) in 28.0756ms
2021-04-17 13:29:47.638 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 13:29:47.641 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/auth application/json 40 - 200 - application/json;+charset=utf-8 59.8140ms
2021-04-17 13:29:47.682 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Opcion?rol=admin - -
2021-04-17 13:29:47.684 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:29:47.685 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Opcion?rol=admin - - - 204 - - 3.9509ms
2021-04-17 13:29:47.688 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Opcion?rol=admin - -
2021-04-17 13:29:47.689 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:29:47.691 -05:00 [INF] Successfully validated the token.
2021-04-17 13:29:47.695 -05:00 [INF] Authorization was successful.
2021-04-17 13:29:47.701 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:29:47.702 -05:00 [INF] Route matched with {action = "Listar", controller = "Opcion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Listar(System.String) on controller ApiVentas.ApiRest.Controllers.OpcionController (ApiVentas.ApiRest).
2021-04-17 13:29:59.179 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:29:59.180 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Opcion?rol=admin - -
2021-04-17 13:29:59.200 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:29:59.201 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[IdOpcion], [o].[EsAdmin], [o].[EsOperador], [o].[Icono], [o].[Nombre], [o].[Url]
FROM [Opcion] AS [o]
WHERE [o].[EsAdmin] = CAST(1 AS bit)
2021-04-17 13:29:59.203 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Opcion?rol=admin - - - 204 - - 22.9367ms
2021-04-17 13:29:59.216 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApiVentas.ApiRest.Managers.DTO.OpcionDTO, ApiVentas.ApiRest, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-04-17 13:29:59.218 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Opcion?rol=admin - -
2021-04-17 13:29:59.222 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest) in 11517.0468ms
2021-04-17 13:29:59.232 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:29:59.236 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:29:59.244 -05:00 [INF] Successfully validated the token.
2021-04-17 13:29:59.247 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Opcion?rol=admin - - - 200 - application/json;+charset=utf-8 11559.2769ms
2021-04-17 13:29:59.250 -05:00 [INF] Authorization was successful.
2021-04-17 13:29:59.257 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:29:59.260 -05:00 [INF] Route matched with {action = "Listar", controller = "Opcion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Listar(System.String) on controller ApiVentas.ApiRest.Controllers.OpcionController (ApiVentas.ApiRest).
2021-04-17 13:30:00.016 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:30:00.023 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[IdOpcion], [o].[EsAdmin], [o].[EsOperador], [o].[Icono], [o].[Nombre], [o].[Url]
FROM [Opcion] AS [o]
WHERE [o].[EsAdmin] = CAST(1 AS bit)
2021-04-17 13:30:00.031 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApiVentas.ApiRest.Managers.DTO.OpcionDTO, ApiVentas.ApiRest, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-04-17 13:30:00.035 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest) in 767.6378ms
2021-04-17 13:30:00.043 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:30:00.047 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Opcion?rol=admin - - - 200 - application/json;+charset=utf-8 829.2525ms
2021-04-17 13:30:05.240 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Opcion?rol=admin - -
2021-04-17 13:30:05.242 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:30:05.244 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Opcion?rol=admin - - - 204 - - 3.4201ms
2021-04-17 13:30:05.246 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Opcion?rol=admin - -
2021-04-17 13:30:05.248 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:30:05.251 -05:00 [INF] Successfully validated the token.
2021-04-17 13:30:05.258 -05:00 [INF] Authorization was successful.
2021-04-17 13:30:05.262 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:30:05.265 -05:00 [INF] Route matched with {action = "Listar", controller = "Opcion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Listar(System.String) on controller ApiVentas.ApiRest.Controllers.OpcionController (ApiVentas.ApiRest).
2021-04-17 13:30:05.275 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:30:05.285 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[IdOpcion], [o].[EsAdmin], [o].[EsOperador], [o].[Icono], [o].[Nombre], [o].[Url]
FROM [Opcion] AS [o]
WHERE [o].[EsAdmin] = CAST(1 AS bit)
2021-04-17 13:30:05.320 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApiVentas.ApiRest.Managers.DTO.OpcionDTO, ApiVentas.ApiRest, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-04-17 13:30:05.325 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest) in 50.8065ms
2021-04-17 13:30:05.328 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:30:05.332 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Opcion?rol=admin - - - 200 - application/json;+charset=utf-8 86.4339ms
2021-04-17 13:30:10.315 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 13:30:10.321 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:30:10.324 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 8.7787ms
2021-04-17 13:30:10.330 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 13:30:10.338 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:30:10.344 -05:00 [INF] Successfully validated the token.
2021-04-17 13:30:10.346 -05:00 [INF] Authorization was successful.
2021-04-17 13:30:10.350 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 13:30:10.355 -05:00 [INF] Route matched with {action = "ListarPag", controller = "Articulo"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ListarPag(ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaParamDTO) on controller ApiVentas.ApiRest.Controllers.ArticuloController (ApiVentas.ApiRest).
2021-04-17 13:30:10.380 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:30:10.422 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DBO].[Product] AS [p]
2021-04-17 13:30:10.447 -05:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results.
2021-04-17 13:30:10.451 -05:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results.
2021-04-17 13:30:10.541 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ProductId], [t].[Nombre], [t].[Precio], [p0].[IdArticuloImagen], [p0].[IdArticulo], [p0].[NombreArchivo], [p0].[NombreGenerado]
FROM (
    SELECT [p].[ProductId], [p].[Nombre], [p].[Precio]
    FROM [DBO].[Product] AS [p]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [DBO].[ProductImage] AS [p0] ON [t].[ProductId] = [p0].[IdArticulo]
ORDER BY [t].[ProductId], [p0].[IdArticuloImagen]
2021-04-17 13:30:10.566 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaDTO'.
2021-04-17 13:30:10.576 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest) in 213.6722ms
2021-04-17 13:30:10.580 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 13:30:10.586 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 200 - application/json;+charset=utf-8 255.4600ms
2021-04-17 13:30:16.855 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Opcion?rol=admin - -
2021-04-17 13:30:16.858 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:30:16.862 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Opcion?rol=admin - - - 204 - - 6.4584ms
2021-04-17 13:30:16.864 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Opcion?rol=admin - -
2021-04-17 13:30:16.866 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:30:16.868 -05:00 [INF] Successfully validated the token.
2021-04-17 13:30:16.869 -05:00 [INF] Authorization was successful.
2021-04-17 13:30:16.878 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:30:16.879 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 13:30:16.882 -05:00 [INF] Route matched with {action = "Listar", controller = "Opcion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Listar(System.String) on controller ApiVentas.ApiRest.Controllers.OpcionController (ApiVentas.ApiRest).
2021-04-17 13:30:16.885 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:30:16.897 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:30:16.900 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 21.5137ms
2021-04-17 13:30:16.914 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[IdOpcion], [o].[EsAdmin], [o].[EsOperador], [o].[Icono], [o].[Nombre], [o].[Url]
FROM [Opcion] AS [o]
WHERE [o].[EsAdmin] = CAST(1 AS bit)
2021-04-17 13:30:16.916 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 13:30:16.925 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApiVentas.ApiRest.Managers.DTO.OpcionDTO, ApiVentas.ApiRest, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-04-17 13:30:16.932 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:30:16.938 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest) in 41.2739ms
2021-04-17 13:30:16.941 -05:00 [INF] Successfully validated the token.
2021-04-17 13:30:16.944 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:30:16.945 -05:00 [INF] Authorization was successful.
2021-04-17 13:30:16.947 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Opcion?rol=admin - - - 200 - application/json;+charset=utf-8 82.8128ms
2021-04-17 13:30:16.948 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 13:30:16.956 -05:00 [INF] Route matched with {action = "ListarPag", controller = "Articulo"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ListarPag(ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaParamDTO) on controller ApiVentas.ApiRest.Controllers.ArticuloController (ApiVentas.ApiRest).
2021-04-17 13:30:16.963 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:30:16.967 -05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DBO].[Product] AS [p]
2021-04-17 13:30:16.978 -05:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ProductId], [t].[Nombre], [t].[Precio], [p0].[IdArticuloImagen], [p0].[IdArticulo], [p0].[NombreArchivo], [p0].[NombreGenerado]
FROM (
    SELECT [p].[ProductId], [p].[Nombre], [p].[Precio]
    FROM [DBO].[Product] AS [p]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [DBO].[ProductImage] AS [p0] ON [t].[ProductId] = [p0].[IdArticulo]
ORDER BY [t].[ProductId], [p0].[IdArticuloImagen]
2021-04-17 13:30:16.990 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaDTO'.
2021-04-17 13:30:16.993 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest) in 31.0282ms
2021-04-17 13:30:16.996 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 13:30:17.001 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 200 - application/json;+charset=utf-8 85.6392ms
2021-04-17 13:30:20.607 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Opcion?rol=admin - -
2021-04-17 13:30:20.608 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:30:20.611 -05:00 [INF] Successfully validated the token.
2021-04-17 13:30:20.612 -05:00 [INF] Authorization was successful.
2021-04-17 13:30:20.614 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:30:20.616 -05:00 [INF] Route matched with {action = "Listar", controller = "Opcion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Listar(System.String) on controller ApiVentas.ApiRest.Controllers.OpcionController (ApiVentas.ApiRest).
2021-04-17 13:30:20.620 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:30:20.626 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[IdOpcion], [o].[EsAdmin], [o].[EsOperador], [o].[Icono], [o].[Nombre], [o].[Url]
FROM [Opcion] AS [o]
WHERE [o].[EsAdmin] = CAST(1 AS bit)
2021-04-17 13:30:20.634 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApiVentas.ApiRest.Managers.DTO.OpcionDTO, ApiVentas.ApiRest, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-04-17 13:30:20.637 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest) in 17.0669ms
2021-04-17 13:30:20.643 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:30:20.645 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Opcion?rol=admin - - - 200 - application/json;+charset=utf-8 38.0525ms
2021-04-17 13:30:33.836 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/auth - -
2021-04-17 13:30:33.840 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:30:33.844 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/auth - - - 204 - - 7.4511ms
2021-04-17 13:30:33.852 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/auth application/json 40
2021-04-17 13:30:33.854 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:30:33.856 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 13:30:33.862 -05:00 [INF] Route matched with {action = "Valida", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Valida(ApiVentas.ApiRest.Managers.DTO.LoginRequestDTO) on controller ApiVentas.ApiRest.Controllers.AuthController (ApiVentas.ApiRest).
2021-04-17 13:30:33.868 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:30:33.875 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__ToUpper_0='?' (Size = 4000), @__clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[IdUsuario], [u].[Clave], [u].[Credencial], [u].[Rol]
FROM [Usuario] AS [u]
WHERE (UPPER([u].[Credencial]) = @__ToUpper_0) AND ([u].[Clave] = @__clave_1)
2021-04-17 13:30:33.885 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.LoginResponseDTO'.
2021-04-17 13:30:33.887 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest) in 19.4224ms
2021-04-17 13:30:33.890 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 13:30:33.897 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/auth application/json 40 - 200 - application/json;+charset=utf-8 45.5172ms
2021-04-17 13:30:33.919 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Opcion?rol=operador - -
2021-04-17 13:30:33.922 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:30:33.927 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Opcion?rol=operador - - - 204 - - 7.4012ms
2021-04-17 13:30:33.929 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Opcion?rol=operador - -
2021-04-17 13:30:33.932 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:30:33.934 -05:00 [INF] Successfully validated the token.
2021-04-17 13:30:33.935 -05:00 [INF] Authorization was successful.
2021-04-17 13:30:33.937 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:30:33.943 -05:00 [INF] Route matched with {action = "Listar", controller = "Opcion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Listar(System.String) on controller ApiVentas.ApiRest.Controllers.OpcionController (ApiVentas.ApiRest).
2021-04-17 13:30:33.951 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:30:33.961 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[IdOpcion], [o].[EsAdmin], [o].[EsOperador], [o].[Icono], [o].[Nombre], [o].[Url]
FROM [Opcion] AS [o]
WHERE [o].[EsOperador] = CAST(1 AS bit)
2021-04-17 13:30:33.965 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApiVentas.ApiRest.Managers.DTO.OpcionDTO, ApiVentas.ApiRest, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-04-17 13:30:33.972 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest) in 21.1878ms
2021-04-17 13:30:33.976 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:30:33.978 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Opcion?rol=operador - - - 200 - application/json;+charset=utf-8 49.6494ms
2021-04-17 13:31:04.983 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 13:31:04.985 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:31:04.987 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 4.8285ms
2021-04-17 13:31:05.000 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 13:31:05.007 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:31:05.015 -05:00 [INF] Successfully validated the token.
2021-04-17 13:31:05.018 -05:00 [INF] Authorization was successful.
2021-04-17 13:31:05.027 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 13:31:05.032 -05:00 [INF] Route matched with {action = "ListarPag", controller = "Articulo"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult ListarPag(ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaParamDTO) on controller ApiVentas.ApiRest.Controllers.ArticuloController (ApiVentas.ApiRest).
2021-04-17 13:31:05.041 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:31:05.052 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [DBO].[Product] AS [p]
2021-04-17 13:31:05.059 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ProductId], [t].[Nombre], [t].[Precio], [p0].[IdArticuloImagen], [p0].[IdArticulo], [p0].[NombreArchivo], [p0].[NombreGenerado]
FROM (
    SELECT [p].[ProductId], [p].[Nombre], [p].[Precio]
    FROM [DBO].[Product] AS [p]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [DBO].[ProductImage] AS [p0] ON [t].[ProductId] = [p0].[IdArticulo]
ORDER BY [t].[ProductId], [p0].[IdArticuloImagen]
2021-04-17 13:31:05.074 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.ProductoListaPaginadaDTO'.
2021-04-17 13:31:05.082 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest) in 42.6585ms
2021-04-17 13:31:05.089 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.ArticuloController.ListarPag (ApiVentas.ApiRest)'
2021-04-17 13:31:05.091 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 200 - application/json;+charset=utf-8 90.3013ms
2021-04-17 13:46:32.662 -05:00 [INF] User profile is available. Using 'C:\Users\Miguelon\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-04-17 13:46:33.379 -05:00 [INF] Now listening on: http://localhost:5000
2021-04-17 13:46:33.380 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2021-04-17 13:46:33.382 -05:00 [INF] Hosting environment: Development
2021-04-17 13:46:33.383 -05:00 [INF] Content root path: D:\Cursos\Galaxy\Net5-Grupo01\Sesion07\Ejercicios\ApiVentas\ApiVentas.ApiRest
2021-04-17 13:46:34.881 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/index.html - -
2021-04-17 13:46:35.062 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/index.html - - - 200 - text/html;charset=utf-8 182.8818ms
2021-04-17 13:46:35.342 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - -
2021-04-17 13:46:35.527 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 184.6257ms
2021-04-17 13:47:23.515 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Opcion - -
2021-04-17 13:47:23.515 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 13:47:23.592 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:47:23.592 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:47:23.596 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 204 - - 81.2943ms
2021-04-17 13:47:23.612 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Opcion - - - 204 - - 98.0645ms
2021-04-17 13:47:23.613 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - -
2021-04-17 13:47:23.646 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Opcion - -
2021-04-17 13:47:23.671 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:47:23.672 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:47:25.697 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-04-17 13:47:25.696 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-04-17 13:47:25.808 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2021-04-17 13:47:25.820 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2021-04-17 13:47:25.834 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 13:47:25.834 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-04-17 13:47:25.852 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 13:47:25.852 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-04-17 13:47:25.856 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Opcion - - - 401 0 - 2209.5307ms
2021-04-17 13:47:25.861 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Articulo/ListarPag?nroPagina=0&regPagina=5&filtro= - - - 401 0 - 2247.3874ms
2021-04-17 13:47:46.039 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/auth - -
2021-04-17 13:47:46.042 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:47:46.046 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/auth - - - 204 - - 7.1267ms
2021-04-17 13:47:46.051 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/auth application/json 40
2021-04-17 13:47:46.052 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:47:46.056 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 13:47:46.111 -05:00 [INF] Route matched with {action = "Valida", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Valida(ApiVentas.ApiRest.Managers.DTO.LoginRequestDTO) on controller ApiVentas.ApiRest.Controllers.AuthController (ApiVentas.ApiRest).
2021-04-17 13:47:48.602 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:47:49.079 -05:00 [INF] Executed DbCommand (50ms) [Parameters=[@__ToUpper_0='?' (Size = 4000), @__clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[IdUsuario], [u].[Clave], [u].[Credencial], [u].[Rol]
FROM [Usuario] AS [u]
WHERE (UPPER([u].[Credencial]) = @__ToUpper_0) AND ([u].[Clave] = @__clave_1)
2021-04-17 13:47:49.129 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/auth application/json 40
2021-04-17 13:47:49.131 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:47:49.133 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 13:47:49.135 -05:00 [INF] Route matched with {action = "Valida", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Valida(ApiVentas.ApiRest.Managers.DTO.LoginRequestDTO) on controller ApiVentas.ApiRest.Controllers.AuthController (ApiVentas.ApiRest).
2021-04-17 13:47:49.178 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:47:49.190 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__ToUpper_0='?' (Size = 4000), @__clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[IdUsuario], [u].[Clave], [u].[Credencial], [u].[Rol]
FROM [Usuario] AS [u]
WHERE (UPPER([u].[Credencial]) = @__ToUpper_0) AND ([u].[Clave] = @__clave_1)
2021-04-17 13:47:49.546 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.LoginResponseDTO'.
2021-04-17 13:47:49.546 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.LoginResponseDTO'.
2021-04-17 13:47:49.566 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest) in 422.0255ms
2021-04-17 13:47:49.566 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest) in 3439.3742ms
2021-04-17 13:47:49.573 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 13:47:49.576 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 13:47:49.586 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/auth application/json 40 - 200 - application/json;+charset=utf-8 457.1764ms
2021-04-17 13:47:49.586 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/auth application/json 40 - 200 - application/json;+charset=utf-8 3535.0215ms
2021-04-17 13:47:49.626 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Opcion - -
2021-04-17 13:47:49.629 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:47:49.632 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Opcion - - - 204 - - 5.7290ms
2021-04-17 13:47:49.636 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Opcion - -
2021-04-17 13:47:49.642 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:47:49.666 -05:00 [INF] Successfully validated the token.
2021-04-17 13:47:49.672 -05:00 [INF] Authorization was successful.
2021-04-17 13:47:49.674 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:47:49.680 -05:00 [INF] Route matched with {action = "Listar", controller = "Opcion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Listar() on controller ApiVentas.ApiRest.Controllers.OpcionController (ApiVentas.ApiRest).
2021-04-17 13:48:22.081 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:48:22.146 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[IdOpcion], [o].[EsAdmin], [o].[EsOperador], [o].[Icono], [o].[Nombre], [o].[Url]
FROM [Opcion] AS [o]
WHERE [o].[EsAdmin] = CAST(1 AS bit)
2021-04-17 13:48:22.180 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApiVentas.ApiRest.Managers.DTO.OpcionDTO, ApiVentas.ApiRest, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-04-17 13:48:22.185 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest) in 32497.4511ms
2021-04-17 13:48:22.188 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:48:22.193 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Opcion - - - 200 - application/json;+charset=utf-8 32556.5768ms
2021-04-17 13:48:35.422 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/auth - -
2021-04-17 13:48:35.425 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:48:35.428 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/auth - - - 204 - - 5.3051ms
2021-04-17 13:48:35.436 -05:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/auth application/json 40
2021-04-17 13:48:35.439 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:48:35.444 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 13:48:35.451 -05:00 [INF] Route matched with {action = "Valida", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Valida(ApiVentas.ApiRest.Managers.DTO.LoginRequestDTO) on controller ApiVentas.ApiRest.Controllers.AuthController (ApiVentas.ApiRest).
2021-04-17 13:48:35.459 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:48:35.469 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__ToUpper_0='?' (Size = 4000), @__clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[IdUsuario], [u].[Clave], [u].[Credencial], [u].[Rol]
FROM [Usuario] AS [u]
WHERE (UPPER([u].[Credencial]) = @__ToUpper_0) AND ([u].[Clave] = @__clave_1)
2021-04-17 13:48:35.480 -05:00 [INF] Executing OkObjectResult, writing value of type 'ApiVentas.ApiRest.Managers.DTO.LoginResponseDTO'.
2021-04-17 13:48:35.485 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest) in 27.3533ms
2021-04-17 13:48:35.492 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.AuthController.Valida (ApiVentas.ApiRest)'
2021-04-17 13:48:35.496 -05:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/auth application/json 40 - 200 - application/json;+charset=utf-8 60.3268ms
2021-04-17 13:48:35.517 -05:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5000/Opcion - -
2021-04-17 13:48:35.519 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:48:35.522 -05:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5000/Opcion - - - 204 - - 5.0174ms
2021-04-17 13:48:35.524 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/Opcion - -
2021-04-17 13:48:35.528 -05:00 [INF] CORS policy execution successful.
2021-04-17 13:48:35.530 -05:00 [INF] Successfully validated the token.
2021-04-17 13:48:35.539 -05:00 [INF] Authorization was successful.
2021-04-17 13:48:35.542 -05:00 [INF] Executing endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:48:35.548 -05:00 [INF] Route matched with {action = "Listar", controller = "Opcion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Listar() on controller ApiVentas.ApiRest.Controllers.OpcionController (ApiVentas.ApiRest).
2021-04-17 13:48:41.745 -05:00 [INF] Entity Framework Core 5.0.3 initialized 'VentasContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-04-17 13:48:41.760 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[IdOpcion], [o].[EsAdmin], [o].[EsOperador], [o].[Icono], [o].[Nombre], [o].[Url]
FROM [Opcion] AS [o]
WHERE [o].[EsOperador] = CAST(1 AS bit)
2021-04-17 13:48:41.766 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ApiVentas.ApiRest.Managers.DTO.OpcionDTO, ApiVentas.ApiRest, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-04-17 13:48:41.777 -05:00 [INF] Executed action ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest) in 6218.5667ms
2021-04-17 13:48:41.781 -05:00 [INF] Executed endpoint 'ApiVentas.ApiRest.Controllers.OpcionController.Listar (ApiVentas.ApiRest)'
2021-04-17 13:48:41.789 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/Opcion - - - 200 - application/json;+charset=utf-8 6263.9136ms
